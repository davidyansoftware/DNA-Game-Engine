{"version":3,"sources":["gameController2.js"],"names":["canvas","Dna","Canvas","document","getElementById","cursor","x","y","input","up","down","left","right","primary","attached","readInput","console","log","player","physics","direction","rightHand","setParent","onMouseMove","pos","Input","getContext","addEventListener","event","transform","tween","moveTo","clientX","getAbsoluteCenter","clientY","absolutePosition","getAbsolutePosition","GameObject","update","dx","dy","rotation","Math","atan2","PI","r","playerCenter","Circle","leftHand","leftHandCenter","leftHandCenter2","rightHandCenter"],"mappings":"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","file":"gameController2.2b463328.map","sourceRoot":"..","sourcesContent":["//let engine = Engine(\"game\", [\"canvas\"]);\nlet canvas = new Dna.Canvas(document.getElementById(\"canvas\"));\n\nlet cursor = {\n  x: 0,\n  y: 0\n};\nlet input = {\n  up: 87,\n  down: 83,\n  left: 65,\n  right: 68,\n  primary: 32\n  //secondary: 17\n};\nlet attached = true;\nfunction readInput(input) {\n  console.log(input);\n  //TODO maybe this should be an event handler\n  //TODO should only update options if different\n  player.physics.direction.x = 0;\n  player.physics.direction.y = 0;\n\n  if (input.left) {\n    player.physics.direction.x -= 5;\n  }\n  if (input.right) {\n    player.physics.direction.x += 5;\n  }\n  if (input.up) {\n    player.physics.direction.y -= 5;\n  }\n  if (input.down) {\n    player.physics.direction.y += 5;\n  }\n  if (input.primary) {\n    if (attached) {\n      rightHand.setParent(canvas, true);\n    } else {\n      rightHand.setParent(player, true);\n    }\n    attached = !attached;\n  }\n}\n//TODO this cant only be called from onmousemove, needs to account for movement of the player\nfunction onMouseMove(pos) {\n  cursor.x = pos.x;\n  cursor.y = pos.y;\n  //console.log(cursor);\n}\nnew Dna.Input(canvas, input, readInput, onMouseMove);\ncanvas.getContext().canvas.addEventListener(\"click\", function(event) {\n  console.log(\n    \"right hand\" + rightHand.transform.x + \" \" + rightHand.transform.y\n  );\n  rightHand.setParent(canvas, true);\n  //TODO the hand will be child of canvas, so absolute coordinates will work, but may need to check absolute vs relative later\n  rightHand.tween.moveTo(\n    function() {\n      console.log(\"calling position callback\");\n      return {\n        x: event.clientX - canvas.transform.getAbsoluteCenter().x,\n        y: event.clientY - canvas.transform.getAbsoluteCenter().y\n      };\n    },\n    function() {\n      console.log(\"calling finished callback\");\n      rightHand.tween.moveTo(\n        function() {\n          let absolutePosition = player.transform.getAbsolutePosition(\n            12.5,\n            -12.5\n          );\n          absolutePosition.x -= canvas.transform.getAbsoluteCenter().x;\n          absolutePosition.y -= canvas.transform.getAbsoluteCenter().y;\n          console.log(absolutePosition);\n          return absolutePosition;\n        },\n        function() {\n          rightHand.setParent(player, true);\n        }\n      );\n    }\n  );\n});\n//let test = new Dna.GameObject();\n\nlet player = new Dna.GameObject(\n  canvas,\n  {\n    x: 0,\n    y: 0,\n    update: function() {\n      //TODO this is currently position object. consolidate with gameobject\n      //console.log(this);\n      //console.log(player.position.getAbsoluteCenter());\n\n      let dx = cursor.x - player.transform.getAbsoluteCenter().x;\n      let dy = cursor.y - player.transform.getAbsoluteCenter().y;\n      this.transform.rotation = (Math.atan2(dy, dx) * 180) / Math.PI + 90;\n\n      //console.log(this.position.rotation);\n    }\n  },\n  {\n    r: 20\n  }\n);\nlet playerCenter = new Dna.Circle(\n  canvas,\n  {\n    x: player.transform.getAbsoluteCenter().x,\n    y: player.transform.getAbsoluteCenter().y,\n    update: function() {\n      this.transform.x =\n        player.transform.getAbsoluteCenter().x -\n        canvas.transform.getAbsoluteCenter().x;\n      this.transform.y =\n        player.transform.getAbsoluteCenter().y -\n        canvas.transform.getAbsoluteCenter().y;\n    }\n  },\n  {\n    r: 10\n  }\n);\n\nlet leftHand = new Dna.Circle(\n  player,\n  {\n    x: -12.5,\n    y: -12.5\n  },\n  {\n    r: 10\n  }\n);\nlet leftHandCenter = new Dna.Circle(\n  canvas,\n  {\n    x: leftHand.transform.getAbsoluteCenter().x,\n    y: leftHand.transform.getAbsoluteCenter().y,\n    update: function() {\n      this.transform.x =\n        leftHand.transform.getAbsoluteCenter().x -\n        canvas.transform.getAbsoluteCenter().x;\n      this.transform.y =\n        leftHand.transform.getAbsoluteCenter().y -\n        canvas.transform.getAbsoluteCenter().y;\n    }\n  },\n  {\n    r: 5\n  }\n);\nlet leftHandCenter2 = new Dna.Circle(\n  canvas,\n  {\n    x: player.transform.getAbsolutePosition(12.5, -12.5).x,\n    y: player.transform.getAbsolutePosition(12.5, -12.5).y,\n    update: function() {\n      this.transform.x =\n        player.transform.getAbsolutePosition(12.5, -12.5).x -\n        canvas.transform.getAbsoluteCenter().x;\n      this.transform.y =\n        player.transform.getAbsolutePosition(12.5, -12.5).y -\n        canvas.transform.getAbsoluteCenter().y;\n    }\n  },\n  { r: 5 }\n);\nlet rightHand = new Dna.Circle(\n  player,\n  {\n    x: 12.5,\n    y: -12.5\n  },\n  { r: 10 }\n);\nlet rightHandCenter = new Dna.Circle(\n  canvas,\n  {\n    x: rightHand.transform.getAbsoluteCenter().x,\n    y: rightHand.transform.getAbsoluteCenter().y,\n    update: function() {\n      this.transform.x =\n        rightHand.transform.getAbsoluteCenter().x -\n        canvas.transform.getAbsoluteCenter().x;\n      this.transform.y =\n        rightHand.transform.getAbsoluteCenter().y -\n        canvas.transform.getAbsoluteCenter().y;\n    }\n  },\n  { r: 5 }\n);\n"]}