{"version":3,"sources":["Hand.js","Body.js","WorldCenter.js","Player.js","hitboxing.js"],"names":["RADIUS","SPEED","Hand","canvas","body","handOffsets","radius","attached","deltaTime","target","gameObject","transform","moveTo","x","y","callback","setParent","comeBack","getAbsolutePosition","reattach","Dna","Components","Polygon","BODY_RADIUS","Body","physics","keyboard","mouse","xv","yv","left","right","up","down","ctx","absoluteCenter","getAbsoluteCenter","dx","dy","rotation","Utilities","Radians","Math","atan2","PI","WorldCenter","CENTER_RADIUS","LEFT_HAND_OFFSET","RIGHT_HAND_OFFSET","Player","parent","SimplePhysics","addComponent","lHand","GameObject","rHand","leftHand","rightHand","Canvas","document","getElementById","start","input","Input","Keyboard","onLeftClick","player","onRightClick","Mouse","scene","Scene","Assets","load"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAMA,MAAM,GAAG,EAAf;AACA,IAAMC,KAAK,GAAG,EAAd;;IAEMC;;;;;AACJ,gBAAYC,MAAZ,EAAoBC,IAApB,EAA0BC,WAA1B,EAAuC;AAAA;;AAAA;;AACrC,8EAAM;AAAEC,MAAAA,MAAM,EAAEN;AAAV,KAAN;AAEA,UAAKG,MAAL,GAAcA,MAAd;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACA,UAAKC,WAAL,GAAmBA,WAAnB;AACA,UAAKE,QAAL,GAAgB,IAAhB;AANqC;AAOtC;;;;2BAEMC,WAAW;AAChB;AACA,UAAI,KAAKC,MAAT,EAAiB;AACf,YAAIA,MAAM,GAAG,KAAKA,MAAL,EAAb;;AACA,YAAI,KAAKC,UAAL,CAAgBC,SAAhB,CAA0BC,MAA1B,CAAiCH,MAAM,CAACI,CAAxC,EAA2CJ,MAAM,CAACK,CAAlD,EAAqDb,KAArD,CAAJ,EAAiE;AAC/D,eAAKc,QAAL;AACD;AACF;;AACD,uEAAaP,SAAb;AACD;;;2BAEMK,GAAGC,GAAG;AACX,WAAKJ,UAAL,CAAgBM,SAAhB,CAA0B,KAAKb,MAA/B,EAAuC,IAAvC;AACA,WAAKI,QAAL,GAAgB,KAAhB;;AACA,WAAKE,MAAL,GAAc,YAAW;AACvB,eAAO;AACLI,UAAAA,CAAC,EAAEA,CADE;AAELC,UAAAA,CAAC,EAAEA;AAFE,SAAP;AAID,OALD;;AAMA,WAAKC,QAAL,GAAgB,KAAKE,QAArB;AACD;;;+BAEU;AAAA;;AACT;AACA,WAAKR,MAAL,GAAc,YAAM;AAClB,eAAO,MAAI,CAACL,IAAL,CAAUO,SAAV,CAAoBO,mBAApB,CACL,MAAI,CAACb,WAAL,CAAiBQ,CADZ,EAEL,MAAI,CAACR,WAAL,CAAiBS,CAFZ,CAAP;AAID,OALD;;AAMA,WAAKC,QAAL,GAAgB,KAAKI,QAArB;AACD;;;+BAEU;AACT,WAAKT,UAAL,CAAgBM,SAAhB,CAA0B,KAAKZ,IAA/B;AACA,WAAKM,UAAL,CAAgBC,SAAhB,CAA0BE,CAA1B,GAA8B,KAAKR,WAAL,CAAiBQ,CAA/C;AACA,WAAKH,UAAL,CAAgBC,SAAhB,CAA0BG,CAA1B,GAA8B,KAAKT,WAAL,CAAiBS,CAA/C;AACA,WAAKP,QAAL,GAAgB,IAAhB;AACA,WAAKE,MAAL,GAAc,IAAd;AACA,WAAKM,QAAL,GAAgB,IAAhB;AACD;;;;EAnDgBK,GAAG,CAACC,UAAJ,CAAeC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHlC,IAAMC,WAAW,GAAG,EAApB,EAEA;;IACMC;;;;;AACJ,gBAAYC,OAAZ,EAAqBC,QAArB,EAA+BC,KAA/B,EAAsC;AAAA;;AAAA;;AACpC,8EAAM;AAAErB,MAAAA,MAAM,EAAEiB;AAAV,KAAN;AAEA,UAAKE,OAAL,GAAeA,OAAf;AAEA,UAAKC,QAAL,GAAgBA,QAAhB;AACA,UAAKC,KAAL,GAAaA,KAAb,CANoC,CAQpC;;AARoC;AASrC;;;;2BAEMnB,WAAW;AAChB,WAAKiB,OAAL,CAAaG,EAAb,GAAkB,CAAlB;AACA,WAAKH,OAAL,CAAaI,EAAb,GAAkB,CAAlB;;AACA,UAAI,KAAKH,QAAL,CAAcI,IAAlB,EAAwB;AACtB,aAAKL,OAAL,CAAaG,EAAb,IAAmB,CAAnB;AACD;;AACD,UAAI,KAAKF,QAAL,CAAcK,KAAlB,EAAyB;AACvB,aAAKN,OAAL,CAAaG,EAAb,IAAmB,CAAnB;AACD;;AACD,UAAI,KAAKF,QAAL,CAAcM,EAAlB,EAAsB;AACpB,aAAKP,OAAL,CAAaI,EAAb,IAAmB,CAAnB;AACD;;AACD,UAAI,KAAKH,QAAL,CAAcO,IAAlB,EAAwB;AACtB,aAAKR,OAAL,CAAaI,EAAb,IAAmB,CAAnB;AACD;AAED;;;;;;;;;;;;AAWA,uEAAarB,SAAb;AACD;;;2BAEM0B,KAAK;AACV,UAAIC,cAAc,GAAG,KAAKzB,UAAL,CAAgBC,SAAhB,CAA0ByB,iBAA1B,EAArB;AACA,UAAIC,EAAE,GAAG,KAAKV,KAAL,CAAWd,CAAX,GAAesB,cAAc,CAACtB,CAAvC;AACA,UAAIyB,EAAE,GAAG,KAAKX,KAAL,CAAWb,CAAX,GAAeqB,cAAc,CAACrB,CAAvC;AACA,WAAKJ,UAAL,CAAgBC,SAAhB,CAA0B4B,QAA1B,GAAqC,IAAInB,GAAG,CAACoB,SAAJ,CAAcC,OAAlB,CACnCC,IAAI,CAACC,KAAL,CAAWL,EAAX,EAAeD,EAAf,IAAqBK,IAAI,CAACE,EAAL,GAAU,CADI,CAArC;;AAIA,uEAAaV,GAAb;AACD;;;;EAnDgBd,GAAG,CAACC,UAAJ,CAAeC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHlC,IAAMtB,MAAM,GAAG,CAAf;;IAEM6C;;;;;AACJ,uBAAYpC,MAAZ,EAAoB;AAAA;;AAAA;;AAClB,qFAAM;AAAEH,MAAAA,MAAM,EAAEN;AAAV,KAAN;AACA,UAAKS,MAAL,GAAcA,MAAd;AAFkB;AAGnB;;;;2BAEMyB,KAAK;AACV,UAAIC,cAAc,GAAG,KAAK1B,MAAL,CAAYE,SAAZ,CAAsByB,iBAAtB,EAArB;AACA,WAAK1B,UAAL,CAAgBC,SAAhB,CAA0BE,CAA1B,GAA8BsB,cAAc,CAACtB,CAA7C;AACA,WAAKH,UAAL,CAAgBC,SAAhB,CAA0BG,CAA1B,GAA8BqB,cAAc,CAACrB,CAA7C;;AAEA,8EAAaoB,GAAb;AACD;;;;EAZuBd,GAAG,CAACC,UAAJ,CAAeC;;;;;;;;;;;ACFzC;;AACA;;AACA;;;;;;;;;;;;;;;;AAEA,IAAMC,WAAW,GAAG,EAApB;AACA,IAAMuB,aAAa,GAAG,CAAtB;AACA,IAAMC,gBAAgB,GAAG;AAAElC,EAAAA,CAAC,EAAE,CAAC,IAAN;AAAYC,EAAAA,CAAC,EAAE,CAAC;AAAhB,CAAzB;AACA,IAAMkC,iBAAiB,GAAG;AAAEnC,EAAAA,CAAC,EAAE,IAAL;AAAWC,EAAAA,CAAC,EAAE,CAAC;AAAf,CAA1B;;IAEMmC;;;;;AACJ,kBAAYC,MAAZ,EAAoBxB,QAApB,EAA8BC,KAA9B,EAAqC;AAAA;;AAAA;;AACnC,gFAAMuB,MAAN,EAAc,EAAd,EAAkB,EAAlB;AAEA,QAAIzB,OAAO,GAAG,IAAIL,GAAG,CAACC,UAAJ,CAAe8B,aAAnB,EAAd;;AACA,UAAKC,YAAL,CAAkB3B,OAAlB;;AAEA,QAAIrB,IAAI,GAAG,IAAIoB,UAAJ,CAASC,OAAT,EAAkBC,QAAlB,EAA4BC,KAA5B,CAAX;;AACA,UAAKyB,YAAL,CAAkBhD,IAAlB;;AAEA,QAAIiD,KAAK,GAAG,IAAIjC,GAAG,CAACkC,UAAR,gCAAyBP,gBAAzB,CAAZ;AACA,QAAIQ,KAAK,GAAG,IAAInC,GAAG,CAACkC,UAAR,gCAAyBN,iBAAzB,CAAZ;AACA,UAAKQ,QAAL,GAAgB,IAAItD,UAAJ,CAASgD,MAAT,iCAAuBH,gBAAvB,CAAhB;AACA,UAAKU,SAAL,GAAiB,IAAIvD,UAAJ,CAASgD,MAAT,iCAAuBF,iBAAvB,CAAjB;AACAK,IAAAA,KAAK,CAACD,YAAN,CAAmB,MAAKI,QAAxB;AACAD,IAAAA,KAAK,CAACH,YAAN,CAAmB,MAAKK,SAAxB;AAEA,QAAIrC,GAAG,CAACkC,UAAR,CAAmBJ,MAAnB,EAA2B,EAA3B,EAA+B,CAAC,IAAIL,wBAAJ,+BAAD,CAA/B;AACA,QAAIzB,GAAG,CAACkC,UAAR,CAAmBJ,MAAnB,EAA2B,EAA3B,EAA+B,CAAC,IAAIL,wBAAJ,CAAgBQ,KAAhB,CAAD,CAA/B;AACA,QAAIjC,GAAG,CAACkC,UAAR,CAAmBJ,MAAnB,EAA2B,EAA3B,EAA+B,CAAC,IAAIL,wBAAJ,CAAgBU,KAAhB,CAAD,CAA/B;AAlBmC;AAmBpC;;;EApBkBnC,GAAG,CAACkC;;;;;;ACTzB;;AAEA,IAAInD,MAAM,GAAG,IAAIiB,GAAG,CAACsC,MAAR,CAAeC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf,CAAb;;AAEA,SAASC,KAAT,GAAiB;AACf,MAAIC,KAAK,GAAG;AACV,QAAI,IADM;AAEV,QAAI,MAFM;AAGV,QAAI,MAHM;AAIV,QAAI,OAJM,CAKV;AACA;AACA;AACA;;AARU,GAAZ;AAUA,MAAIpC,QAAQ,GAAG,IAAIN,GAAG,CAAC2C,KAAJ,CAAUC,QAAd,CAAuBF,KAAvB,CAAf;;AAEA,WAASG,WAAT,CAAqBtC,KAArB,EAA4B;AAC1BuC,IAAAA,MAAM,CAACV,QAAP,CAAgB5C,MAAhB,CAAuBe,KAAK,CAACd,CAA7B,EAAgCc,KAAK,CAACb,CAAtC;AACD;;AACD,WAASqD,YAAT,CAAsBxC,KAAtB,EAA6B;AAC3BuC,IAAAA,MAAM,CAACT,SAAP,CAAiB7C,MAAjB,CAAwBe,KAAK,CAACd,CAA9B,EAAiCc,KAAK,CAACb,CAAvC;AACD;;AACD,MAAIa,KAAK,GAAG,IAAIP,GAAG,CAAC2C,KAAJ,CAAUK,KAAd,CAAoBjE,MAApB,EAA4B8D,WAA5B,EAAyCE,YAAzC,CAAZ;AAEA,MAAID,MAAM,GAAG,IAAIjB,cAAJ,CAAW9C,MAAX,EAAmBuB,QAAnB,EAA6BC,KAA7B,CAAb;AACD;;AAED,IAAI0C,KAAK,GAAG,IAAIjD,GAAG,CAACkD,KAAR,CAAc,CAACnE,MAAD,CAAd,EAAwB,IAAIiB,GAAG,CAACmD,MAAR,EAAxB,EAA0CV,KAA1C,CAAZ;AACAQ,KAAK,CAACG,IAAN","file":"hitboxing.39ba9190.map","sourceRoot":"../demos/hitboxing","sourcesContent":["const RADIUS = 10;\nconst SPEED = 10;\n\nclass Hand extends Dna.Components.Polygon {\n  constructor(canvas, body, handOffsets) {\n    super({ radius: RADIUS });\n\n    this.canvas = canvas;\n    this.body = body;\n    this.handOffsets = handOffsets;\n    this.attached = true;\n  }\n\n  update(deltaTime) {\n    //TODO abstract this to another component\n    if (this.target) {\n      let target = this.target();\n      if (this.gameObject.transform.moveTo(target.x, target.y, SPEED)) {\n        this.callback();\n      }\n    }\n    super.update(deltaTime);\n  }\n\n  moveTo(x, y) {\n    this.gameObject.setParent(this.canvas, true);\n    this.attached = false;\n    this.target = function() {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    this.callback = this.comeBack;\n  }\n\n  comeBack() {\n    //let self = this;\n    this.target = () => {\n      return this.body.transform.getAbsolutePosition(\n        this.handOffsets.x,\n        this.handOffsets.y\n      );\n    };\n    this.callback = this.reattach;\n  }\n\n  reattach() {\n    this.gameObject.setParent(this.body);\n    this.gameObject.transform.x = this.handOffsets.x;\n    this.gameObject.transform.y = this.handOffsets.y;\n    this.attached = true;\n    this.target = null;\n    this.callback = null;\n  }\n}\n\nexport { Hand };\n","const BODY_RADIUS = 20;\n\n//TODO should have independant logic from polygon\nclass Body extends Dna.Components.Polygon {\n  constructor(physics, keyboard, mouse) {\n    super({ radius: BODY_RADIUS });\n\n    this.physics = physics;\n\n    this.keyboard = keyboard;\n    this.mouse = mouse;\n\n    //this.attached = true;\n  }\n\n  update(deltaTime) {\n    this.physics.xv = 0;\n    this.physics.yv = 0;\n    if (this.keyboard.left) {\n      this.physics.xv -= 5;\n    }\n    if (this.keyboard.right) {\n      this.physics.xv += 5;\n    }\n    if (this.keyboard.up) {\n      this.physics.yv -= 5;\n    }\n    if (this.keyboard.down) {\n      this.physics.yv += 5;\n    }\n\n    /*\n    if (this.keyboard.primary) {\n      if (player.rightHand.attached) {\n        this.rightHand.gameObject.setParent(canvas, true);\n      } else {\n        this.rightHand.gameObject.setParent(player, true);\n      }\n      this.rightHand.attached = !attached;\n    }\n    */\n\n    super.update(deltaTime);\n  }\n\n  render(ctx) {\n    let absoluteCenter = this.gameObject.transform.getAbsoluteCenter();\n    let dx = this.mouse.x - absoluteCenter.x;\n    let dy = this.mouse.y - absoluteCenter.y;\n    this.gameObject.transform.rotation = new Dna.Utilities.Radians(\n      Math.atan2(dy, dx) + Math.PI / 2\n    );\n\n    super.render(ctx);\n  }\n}\n\nexport { Body };\n","const RADIUS = 5;\n\nclass WorldCenter extends Dna.Components.Polygon {\n  constructor(target) {\n    super({ radius: RADIUS });\n    this.target = target;\n  }\n\n  render(ctx) {\n    let absoluteCenter = this.target.transform.getAbsoluteCenter();\n    this.gameObject.transform.x = absoluteCenter.x;\n    this.gameObject.transform.y = absoluteCenter.y;\n\n    super.render(ctx);\n  }\n}\n\nexport { WorldCenter };\n","import { Hand } from \"./Hand\";\nimport { Body } from \"./Body\";\nimport { WorldCenter } from \"./WorldCenter\";\n\nconst BODY_RADIUS = 20;\nconst CENTER_RADIUS = 5;\nconst LEFT_HAND_OFFSET = { x: -12.5, y: -12.5 };\nconst RIGHT_HAND_OFFSET = { x: 12.5, y: -12.5 };\n\nclass Player extends Dna.GameObject {\n  constructor(parent, keyboard, mouse) {\n    super(parent, {}, []);\n\n    let physics = new Dna.Components.SimplePhysics();\n    this.addComponent(physics);\n\n    let body = new Body(physics, keyboard, mouse);\n    this.addComponent(body);\n\n    let lHand = new Dna.GameObject(this, LEFT_HAND_OFFSET);\n    let rHand = new Dna.GameObject(this, RIGHT_HAND_OFFSET);\n    this.leftHand = new Hand(parent, this, LEFT_HAND_OFFSET);\n    this.rightHand = new Hand(parent, this, RIGHT_HAND_OFFSET);\n    lHand.addComponent(this.leftHand);\n    rHand.addComponent(this.rightHand);\n\n    new Dna.GameObject(parent, {}, [new WorldCenter(this)]);\n    new Dna.GameObject(parent, {}, [new WorldCenter(lHand)]);\n    new Dna.GameObject(parent, {}, [new WorldCenter(rHand)]);\n  }\n}\n\nexport { Player };\n","import { Player } from \"./Player\";\n\nlet canvas = new Dna.Canvas(document.getElementById(\"canvas\"));\n\nfunction start() {\n  let input = {\n    87: \"up\",\n    83: \"down\",\n    65: \"left\",\n    68: \"right\"\n    //up: 87,\n    //down: 83,\n    //left: 65,\n    //right: 68\n  };\n  let keyboard = new Dna.Input.Keyboard(input);\n\n  function onLeftClick(mouse) {\n    player.leftHand.moveTo(mouse.x, mouse.y);\n  }\n  function onRightClick(mouse) {\n    player.rightHand.moveTo(mouse.x, mouse.y);\n  }\n  let mouse = new Dna.Input.Mouse(canvas, onLeftClick, onRightClick);\n\n  let player = new Player(canvas, keyboard, mouse);\n}\n\nlet scene = new Dna.Scene([canvas], new Dna.Assets(), start);\nscene.load();\n"]}