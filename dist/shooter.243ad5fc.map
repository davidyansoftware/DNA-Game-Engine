{"version":3,"sources":["demos/shooter/ImageAngle.js","demos/shooter/GunState.js","demos/shooter/Bullet.js","demos/shooter/GunData.js","demos/shooter/Gun.js","demos/shooter/Hero.js","demos/shooter/UnitAngle.js","demos/shooter/HeroPrefab.js","demos/shooter/Boundary.js","demos/shooter/Monster.js","demos/shooter/Slime.js","demos/shooter/Crosshair.js","demos/shooter/shooter.js"],"names":["ImageAngle","image","angle","options","defaultXScale","console","log","offset","Math","PI","length","deltaTime","radians","increment","index","floor","updateOptions","gameObject","transform","xScale","Dna","Component","GunState","gunData","audio","Components","Audio","volume","reloading","clipAmmo","clipSize","extraAmmo","SPEED","RADIUS","DAMAGE","Bullet","parent","position","hurtboxes","maxDistance","addGameObject","GameObject","rotation","Utilities","Radians","physics","Physics","speed","callback","destroy","addComponent","Hitcircle","radius","onCollisionEnter","hurtbox","play","gunHit","unit","takeDamage","knockback","getCurrentDirection","pistolUpImage","Image","src","pistolUpSprite","pistolUp","width","height","pistolDiagUpImage","pistolDiagUpSprite","pistolDiagUp","pistolSideImage","pistolSideSprite","pistolSide","pistolDiagDownImage","pistolDiagDownSprite","pistolDiagDown","pistolDownImage","pistolDownSprite","pistolDown","bulletImage","bulletSprite","bullet","Pistol","name","shootClip","pistolShoot","emptyClip","pistolEmpty","reloadClip","pistolReload","cooldown","spriteOptions","spread","generateBullets","gun","getCanvas","getAbsoluteCenter","getNewAngle","shotgunUpImage","shotgunUpSprite","shotgunUp","shotgunDiagUpImage","shotgunDiagUpSprite","shotgunDiagUp","shotgunSideImage","shotgunSideSprite","shotgunSide","shotgunDiagDownImage","shotgunDiagDownSprite","shotgunDiagDown","shotgunDownImage","shotgunDownSprite","shotgunDown","Shotgun","shotgunShoot","i","flamethrowerUpImage","flamethrowerUpSprite","flamethrowerUp","flamethrowerDiagUpImage","flamethrowerDiagUpSprite","flamethrowerDiagUp","flamethrowerSideImage","flamethrowerSideSprite","flamethrowerSide","flamethrowerDiagDownImage","flamethrowerDiagDownSprite","flamethrowerDiagDown","flamethrowerDownImage","flamethrowerDownSprite","flamethrowerDown","flameImage","flameSprite","Flamethrower","flamethrowerShoot","ticksPerFrame","numberOfFrames","RELOAD_TIME","EMPTY_COOLDOWN","GUN_STATES","GunComponent","ammoText","reloadingText","gunImage","emptyCooldown","gunIndex","gunState","keyboard","Input","Keyboard","reload","changeWeapon","updateAmmoText","finishReload","setActive","totalAmmo","min","max","stopReload","weaponSwapClip","text","GunPosition","Vector","x","y","Gun","CLIP_SIZE","TOTAL_AMMO","Hero","mouse","invulnerable","coordinates","Coordinates","damage","source","knockbackPhysics","removeComponent","left","add","UNIT_LEFT","right","UNIT_RIGHT","up","UNIT_UP","down","UNIT_DOWN","leftClick","shoot","magnitude","xv","yv","UnitAngle","target","getAngleToTransform","hero_default","loop","heroUpImage","heroUpSheet","heroUp","heroUpSideImage","heroUpSideSheet","heroUpSide","heroSideImage","heroSideSheet","heroSide","heroDownSideImage","heroDownSideSheet","heroDownSide","heroDownImage","heroDownSheet","heroDown","HeroPrefab","canvas","crosshair","heroHitbox","heroImage","Text","hitboxSet","unitAngle","SimplePhysics","Boundary","alignment","getPosition","Rectangle","Hitbox","onCollision","Alignments","TOP","BOTTOM","LEFT","RIGHT","Movement","Ai","hero","range","attack","getDistanceToTransform","Monster","hp","hpText","maxHp","setHpText","direction","MAX_HP","slime_default","slimeUpImage","slimeUpSheet","slimeUp","slimeDownImage","slimeDownSheet","slimeDown","slimeSideImage","slimeLeftSheet","slimeSide","Slime","heroHurtbox","enemyHurtboxes","CrosshairComponent","crosshairImage","Crosshair","floorImage","Dom","tileSet","background","StaticCanvas","document","getElementById","load","type","types","randomTiled","destWidth","destHeight","xWeight","yWeight","wImage","wSprite","aImage","aSprite","sImage","sSprite","dImage","dSprite","tabImage","tabSprite","rImage","rSprite","mouseImage","mouseSprite","leftClickImage","leftClickSprite","foreground","getImageOptions","stretched","controls","moveControls","shootControls","gunControls","renderAll","Canvas","Mouse","ammoTextContainer","X_OFFSET","Y_OFFSET","X_LONG","Y_LONG","SHORT","topBoundary","bottomBoundary","leftBoundary","rightBoundary"],"mappings":"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","file":"shooter.243ad5fc.map","sourceRoot":"..","sourcesContent":["class ImageAngle extends Dna.Component {\n  constructor(image, angle, options, defaultXScale) {\n    super();\n\n    this.image = image;\n    this.angle = angle;\n    this.options = options;\n    this.defaultXScale = defaultXScale;\n\n    console.log(this.options);\n    this.offset = Math.PI / this.options.length;\n  }\n\n  update(deltaTime) {\n    let angle =\n      ((this.angle.radians % (Math.PI * 2)) + Math.PI * 2) % (Math.PI * 2);\n    let increment = (Math.PI * 2) / this.options.length;\n    let index =\n      (Math.floor((angle + this.offset) / increment) + this.options.length) %\n      this.options.length;\n\n    this.image.updateOptions(this.options[index]);\n\n    //console.log(this.image.height);\n    //console.log(this.image.width);\n\n    this.image.gameObject.transform.xScale =\n      angle < Math.PI ? this.defaultXScale : -this.defaultXScale;\n  }\n}\n\nexport { ImageAngle };\n","class GunState {\n  constructor(gunData) {\n    this.gunData = gunData;\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n\n    this.reloading = false;\n    this.clipAmmo = gunData.clipSize;\n    this.extraAmmo = gunData.extraAmmo;\n  }\n}\n\nexport { GunState };\n","//TODO store onhitclip in monsterdata\nimport gunHit from \"./assets/sounds/gun_hit.wav\";\n\nconst SPEED = 5;\nconst RADIUS = 2;\n//const MAX_DISTANCE = 500;\nconst DAMAGE = 10;\n\nlet audio = new Dna.Components.Audio({ volume: 0.05 });\n\nclass Bullet extends Dna.GameObject {\n  constructor(parent, position, image, angle, hurtboxes, maxDistance) {\n    super(parent, position, []);\n\n    // this is a nested object to handle rotation seperate from physics\n    this.addGameObject(\n      new Dna.GameObject(\n        this,\n        {\n          rotation: new Dna.Utilities.Radians(angle.radians - Math.PI / 2)\n        },\n        [image]\n      )\n    );\n\n    let physics = new Dna.Components.Physics({\n      speed: SPEED,\n      angle: angle,\n      maxDistance: maxDistance,\n      callback: () => {\n        this.destroy();\n      }\n    });\n    this.addComponent(physics);\n\n    //TODO reverse this logic, keep track of bullet array in hero\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hurtboxes: hurtboxes,\n        onCollisionEnter: hurtbox => {\n          this.destroy();\n\n          //audio.play(gunHit);\n          hurtbox.gameObject.audio.play(gunHit);\n\n          hurtbox.gameObject.unit.takeDamage(DAMAGE);\n\n          hurtbox.gameObject.unit.knockback(\n            this.transform.getCurrentDirection()\n          );\n        }\n      })\n    );\n  }\n}\n\nexport { Bullet };\n","import { Bullet } from \"./Bullet\";\nimport pistolUpSprite from \"./assets/pistol/up.png\";\nimport pistolDiagUpSprite from \"./assets/pistol/diagup.png\";\nimport pistolSideSprite from \"./assets/pistol/side.png\";\nimport pistolDiagDownSprite from \"./assets/pistol/diagdown.png\";\nimport pistolDownSprite from \"./assets/pistol/down.png\";\nimport pistolShoot from \"./assets/sounds/pistol_shoot.wav\";\nimport pistolEmpty from \"./assets/sounds/gun_empty.wav\";\nimport pistolReload from \"./assets/sounds/gun_reload.mp3\";\nimport bulletSprite from \"./assets/bullets/bullet.png\";\n\nlet pistolUpImage = new Image();\npistolUpImage.src = pistolUpSprite;\nlet pistolUp = {\n  width: 14,\n  height: 12,\n  image: pistolUpImage\n};\nlet pistolDiagUpImage = new Image();\npistolDiagUpImage.src = pistolDiagUpSprite;\nlet pistolDiagUp = {\n  width: 14,\n  height: 12,\n  image: pistolDiagUpImage\n};\nlet pistolSideImage = new Image();\npistolSideImage.src = pistolSideSprite;\nlet pistolSide = {\n  width: 16,\n  height: 8,\n  image: pistolSideImage\n};\nlet pistolDiagDownImage = new Image();\npistolDiagDownImage.src = pistolDiagDownSprite;\nlet pistolDiagDown = {\n  width: 14,\n  height: 11,\n  image: pistolDiagDownImage\n};\nlet pistolDownImage = new Image();\npistolDownImage.src = pistolDownSprite;\nlet pistolDown = {\n  width: 14,\n  height: 12,\n  image: pistolDownImage\n};\n\nlet bulletImage = new Image();\nbulletImage.src = bulletSprite;\nlet bullet = new Dna.Components.Image({\n  width: 6,\n  height: 6,\n  image: bulletImage\n});\n\nlet Pistol = {\n  name: \"Pistol\",\n  shootClip: pistolShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 20,\n  extraAmmo: 100,\n  cooldown: 0.5,\n  //cooldown: 500,\n  //default option for ui and initialization?\n  spriteOptions: [\n    pistolUp,\n    pistolDiagUp,\n    pistolSide,\n    pistolDiagDown,\n    pistolDown,\n    pistolDiagDown,\n    pistolSide,\n    pistolDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 8),\n  generateBullets(gun, hurtboxes) {\n    new Bullet(\n      gun.getCanvas(),\n      gun.transform.getAbsoluteCenter(),\n      bullet,\n      //new Dna.Utilities.Radians(gun.angle.radians),\n      gun.angle.getNewAngle(this.spread),\n      hurtboxes,\n      600\n    );\n  }\n};\n\nimport shotgunUpSprite from \"./assets/shotgun/up.png\";\nimport shotgunDiagUpSprite from \"./assets/shotgun/diagup.png\";\nimport shotgunSideSprite from \"./assets/shotgun/side.png\";\nimport shotgunDiagDownSprite from \"./assets/shotgun/diagdown.png\";\nimport shotgunDownSprite from \"./assets/shotgun/down.png\";\nimport shotgunShoot from \"./assets/sounds/shotgun_shoot.wav\";\n\nlet shotgunUpImage = new Image();\nshotgunUpImage.src = shotgunUpSprite;\nlet shotgunUp = {\n  width: 8,\n  height: 12,\n  image: shotgunUpImage\n};\nlet shotgunDiagUpImage = new Image();\nshotgunDiagUpImage.src = shotgunDiagUpSprite;\nlet shotgunDiagUp = {\n  width: 14,\n  height: 14,\n  image: shotgunDiagUpImage\n};\nlet shotgunSideImage = new Image();\nshotgunSideImage.src = shotgunSideSprite;\nlet shotgunSide = {\n  width: 18,\n  height: 9,\n  image: shotgunSideImage\n};\nlet shotgunDiagDownImage = new Image();\nshotgunDiagDownImage.src = shotgunDiagDownSprite;\nlet shotgunDiagDown = {\n  width: 17,\n  height: 10,\n  image: shotgunDiagDownImage\n};\nlet shotgunDownImage = new Image();\nshotgunDownImage.src = shotgunDownSprite;\nlet shotgunDown = {\n  width: 8,\n  height: 12,\n  image: shotgunDownImage\n};\n\nlet Shotgun = {\n  name: \"Shotgun\",\n  shootClip: shotgunShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 8,\n  extraAmmo: 50,\n  cooldown: 1.5,\n  //default option for ui and initialization?\n  spriteOptions: [\n    shotgunUp,\n    shotgunDiagUp,\n    shotgunSide,\n    shotgunDiagDown,\n    shotgunDown,\n    shotgunDiagDown,\n    shotgunSide,\n    shotgunDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 4),\n  generateBullets(gun, hurtboxes) {\n    for (let i = 0; i < 4; i++) {\n      new Bullet(\n        gun.getCanvas(),\n        gun.transform.getAbsoluteCenter(),\n        bullet,\n        gun.angle.getNewAngle(this.spread),\n        hurtboxes,\n        200\n      );\n    }\n  }\n};\n\nimport flamethrowerUpSprite from \"./assets/flamethrower/up.png\";\nimport flamethrowerDiagUpSprite from \"./assets/flamethrower/diagup.png\";\nimport flamethrowerSideSprite from \"./assets/flamethrower/side.png\";\nimport flamethrowerDiagDownSprite from \"./assets/flamethrower/diagdown.png\";\nimport flamethrowerDownSprite from \"./assets/flamethrower/down.png\";\nimport flameSprite from \"./assets/bullets/flame.png\";\nimport flamethrowerShoot from \"./assets/sounds/flamethrower_shoot.wav\";\n\nlet flamethrowerUpImage = new Image();\nflamethrowerUpImage.src = flamethrowerUpSprite;\nlet flamethrowerUp = {\n  width: 14,\n  height: 17,\n  image: flamethrowerUpImage\n};\nlet flamethrowerDiagUpImage = new Image();\nflamethrowerDiagUpImage.src = flamethrowerDiagUpSprite;\nlet flamethrowerDiagUp = {\n  width: 16,\n  height: 16,\n  image: flamethrowerDiagUpImage\n};\nlet flamethrowerSideImage = new Image();\nflamethrowerSideImage.src = flamethrowerSideSprite;\nlet flamethrowerSide = {\n  width: 26,\n  height: 9,\n  image: flamethrowerSideImage\n};\nlet flamethrowerDiagDownImage = new Image();\nflamethrowerDiagDownImage.src = flamethrowerDiagDownSprite;\nlet flamethrowerDiagDown = {\n  width: 19,\n  height: 14,\n  image: flamethrowerDiagDownImage\n};\nlet flamethrowerDownImage = new Image();\nflamethrowerDownImage.src = flamethrowerDownSprite;\nlet flamethrowerDown = {\n  width: 14,\n  height: 17,\n  image: flamethrowerDownImage\n};\n\nlet flameImage = new Image();\nflameImage.src = flameSprite;\n\nlet Flamethrower = {\n  name: \"Flamethrower\",\n  shootClip: flamethrowerShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 100,\n  extraAmmo: 1000,\n  cooldown: 0.04,\n  //default option for ui and initialization?\n  spriteOptions: [\n    flamethrowerUp,\n    flamethrowerDiagUp,\n    flamethrowerSide,\n    flamethrowerDiagDown,\n    flamethrowerDown,\n    flamethrowerDiagDown,\n    flamethrowerSide,\n    flamethrowerDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 6),\n  generateBullets(gun, hurtboxes) {\n    //console.log(gun);\n    //let spread = new Dna.Utilities.Radians(Math.PI / 4);\n    //for (let i = 0; i < 4; i++) {\n    new Bullet(\n      gun.getCanvas(),\n      gun.transform.getAbsoluteCenter(),\n      new Dna.Components.Image({\n        width: 13,\n        height: 10,\n        image: flameImage,\n\n        ticksPerFrame: 5,\n        numberOfFrames: 2\n      }),\n      gun.angle.getNewAngle(this.spread),\n      hurtboxes,\n      200\n    );\n    //}\n  }\n};\n\nexport { Pistol, Shotgun, Flamethrower };\n","import { ImageAngle } from \"./ImageAngle\";\nimport { GunState } from \"./GunState\";\nimport { Pistol, Shotgun, Flamethrower } from \"./GunData\";\nimport weaponSwapClip from \"./assets/sounds/weapon_swap.mp3\";\n\nconst RELOAD_TIME = 2;\nconst EMPTY_COOLDOWN = 0.5;\nconst GUN_STATES = [\n  new GunState(Pistol),\n  new GunState(Shotgun),\n  new GunState(Flamethrower)\n];\n\nclass GunComponent extends Dna.Component {\n  constructor(ammoText, reloadingText, gunImage, hurtboxes) {\n    super();\n\n    this.ammoText = ammoText;\n    this.reloadingText = reloadingText;\n    this.gunImage = gunImage;\n    this.hurtboxes = hurtboxes;\n\n    this.cooldown = 0;\n    this.emptyCooldown = 0;\n    //this.reloading = false;\n    this.reloading = 0;\n\n    this.gunIndex = 0;\n    this.gunState = GUN_STATES[this.gunIndex];\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.keyboard = new Dna.Input.Keyboard(\n      {},\n      {\n        82: () => {\n          this.reload();\n        },\n        9: () => {\n          this.changeWeapon();\n        }\n      }\n    );\n\n    this.updateAmmoText();\n  }\n\n  update(deltaTime) {\n    this.cooldown -= deltaTime;\n    this.emptyCooldown -= deltaTime;\n    if (this.reloading > 0) {\n      this.reloading -= deltaTime;\n      if (this.reloading <= 0) {\n        this.finishReload();\n      }\n    }\n  }\n\n  shoot() {\n    if (this.cooldown > 0) return;\n    if (this.reloading > 0) return;\n    if (this.gunState.clipAmmo <= 0) {\n      if (this.emptyCooldown <= 0) {\n        this.emptyCooldown = EMPTY_COOLDOWN;\n        this.audio.play(this.gunState.gunData.emptyClip);\n      }\n      return;\n    }\n\n    this.gunState.gunData.generateBullets(this.gameObject, this.hurtboxes);\n    this.audio.play(this.gunState.gunData.shootClip);\n\n    this.gunState.clipAmmo--;\n    this.cooldown = this.gunState.gunData.cooldown;\n\n    this.updateAmmoText();\n  }\n\n  reload() {\n    if (this.gunState.clipAmmo >= this.gunState.gunData.clipSize) return;\n    if (this.gunState.extraAmmo <= 0) return;\n    if (this.reloading > 0) return;\n\n    this.reloading = RELOAD_TIME;\n    this.reloadingText.setActive(true);\n\n    this.audio.play(this.gunState.gunData.reloadClip);\n  }\n\n  stopReload() {\n    this.reloading = 0;\n    this.reloadingText.setActive(false);\n  }\n\n  finishReload() {\n    let totalAmmo = this.gunState.clipAmmo + this.gunState.extraAmmo;\n    this.gunState.clipAmmo = Math.min(\n      totalAmmo,\n      this.gunState.gunData.clipSize\n    );\n    this.gunState.extraAmmo = Math.max(0, totalAmmo - this.gunState.clipAmmo);\n\n    this.stopReload();\n    this.updateAmmoText();\n  }\n\n  changeWeapon(gunState) {\n    this.stopReload();\n\n    this.gunIndex = (this.gunIndex + 1) % GUN_STATES.length;\n    this.gunState = GUN_STATES[this.gunIndex];\n\n    this.audio.play(weaponSwapClip);\n\n    this.gunImage.options = this.gunState.gunData.spriteOptions;\n\n    this.updateAmmoText();\n  }\n\n  updateAmmoText() {\n    this.ammoText.text = this.gunState.clipAmmo + \"/\" + this.gunState.extraAmmo;\n  }\n}\n\nclass GunPosition extends Dna.Component {\n  constructor(angle) {\n    super();\n\n    //TODO just set this transform.position to be this\n    this.angle = angle;\n    this.position = new Dna.Utilities.Vector(angle, 10);\n  }\n\n  update(deltaTime) {\n    // change transform based on angle\n    this.gameObject.transform.x = this.position.x;\n    this.gameObject.transform.y = this.position.y;\n  }\n}\n\nclass Gun extends Dna.GameObject {\n  constructor(parent, position, angle, hurtboxes, ammoText, reloadingText) {\n    console.log(parent);\n    super(parent, position, []);\n\n    this.angle = angle;\n\n    let image = new Dna.Components.Image(\n      GUN_STATES[0].gunData.spriteOptions[0]\n    );\n    new Dna.GameObject(this, {}, [image]);\n\n    this.gunImage = new ImageAngle(\n      image,\n      angle,\n      GUN_STATES[0].gunData.spriteOptions,\n      1\n    );\n    this.addComponent(this.gunImage);\n\n    this.addComponent(new GunPosition(angle));\n\n    this.gun = new GunComponent(\n      ammoText,\n      reloadingText,\n      this.gunImage,\n      hurtboxes\n    );\n    this.addComponent(this.gun);\n  }\n}\n\nexport { Gun };\n","import { Gun } from \"./Gun\";\nimport { Bullet } from \"./Bullet\";\n\nconst SPEED = 3;\nconst CLIP_SIZE = 20;\nconst TOTAL_AMMO = 100;\nconst RELOAD_TIME = 2;\n\nclass Hero extends Dna.Component {\n  constructor(\n    image,\n    ammoText,\n    reloadingText,\n    mouse,\n    angle,\n    physics,\n    hurtboxes,\n    gun,\n    audio\n  ) {\n    super();\n\n    this.keyboard = new Dna.Input.Keyboard({\n      87: \"up\",\n      83: \"down\",\n      65: \"left\",\n      68: \"right\"\n    });\n\n    this.image = image;\n\n    this.mouse = mouse;\n    this.angle = angle;\n    this.physics = physics;\n    //this.hurtboxes = hurtboxes;\n    //TODO dont need this if shooting is handled from gun component\n    this.gun = gun;\n    this.audio = audio;\n\n    this.invulnerable = 0;\n\n    this.coordinates = new Dna.Utilities.Coordinates(0, 0);\n  }\n\n  takeDamage(damage, source) {\n    if (this.invulnerable > 0) return;\n\n    console.log(\"taking damage: \" + damage);\n\n    //TODO angle should be based on the angle the monster hit\n    let knockbackPhysics = new Dna.Components.Physics({\n      angle: source.transform.getCurrentDirection(),\n      speed: 2,\n      maxDistance: 20,\n      callback: () => {\n        this.gameObject.removeComponent(knockbackPhysics);\n      }\n    });\n    this.gameObject.addComponent(knockbackPhysics);\n\n    this.invulnerable = 0.5;\n  }\n\n  //TODO update this to use regular physics class\n  update(deltaTime) {\n    this.coordinates.x = 0;\n    this.coordinates.y = 0;\n    if (this.keyboard.left)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_LEFT);\n    if (this.keyboard.right)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_RIGHT);\n    if (this.keyboard.up) this.coordinates.add(Dna.Utilities.Vector.UNIT_UP);\n    if (this.keyboard.down)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_DOWN);\n\n    //TODO control this from gun class\n    if (this.mouse.leftClick) this.gun.gun.shoot();\n\n    if (this.coordinates.magnitude > 0) this.coordinates.magnitude = SPEED;\n    this.physics.xv = this.coordinates.x;\n    this.physics.yv = this.coordinates.y;\n\n    this.cooldown -= deltaTime;\n    this.emptyCooldown -= deltaTime;\n    this.invulnerable -= deltaTime;\n  }\n\n  render() {\n    //TODO flash if invulnerable\n    super.render();\n  }\n}\n\nexport { Hero };\n","class UnitAngle extends Dna.Component {\n  constructor(target) {\n    super();\n\n    this.target = target;\n\n    this.angle = new Dna.Utilities.Radians(0);\n  }\n\n  update(deltaTime) {\n    this.angle.radians = this.gameObject.transform.getAngleToTransform(\n      this.target.transform\n    );\n  }\n}\nexport { UnitAngle };\n","import { Hero } from \"./Hero\";\nimport { Gun } from \"./Gun\";\nimport { UnitAngle } from \"./UnitAngle\";\nimport { ImageAngle } from \"./ImageAngle\";\nimport { Pistol, Shotgun, Flamethrower } from \"./GunData\";\n//TODO need to impliment idle animation when hero is not moving\n//import heroIdleSheet from \"./assets/hero/idle.png\";\nimport heroUpSheet from \"./assets/hero/up.png\";\nimport heroUpSideSheet from \"./assets/hero/upside.png\";\nimport heroSideSheet from \"./assets/hero/side.png\";\nimport heroDownSideSheet from \"./assets/hero/downside.png\";\nimport heroDownSheet from \"./assets/hero/down.png\";\n\nconst RADIUS = 10;\nlet hero_default = {\n  width: 20,\n  height: 24,\n  loop: true,\n  numberOfFrames: 4,\n  ticksPerFrame: 5\n  //framesPerRow: 4\n};\nlet heroUpImage = new Image();\nheroUpImage.src = heroUpSheet;\nlet heroUp = {\n  image: heroUpImage\n};\nlet heroUpSideImage = new Image();\nheroUpSideImage.src = heroUpSideSheet;\nlet heroUpSide = {\n  image: heroUpSideImage\n};\nlet heroSideImage = new Image();\nheroSideImage.src = heroSideSheet;\nlet heroSide = {\n  image: heroSideImage\n};\nlet heroDownSideImage = new Image();\nheroDownSideImage.src = heroDownSideSheet;\nlet heroDownSide = {\n  image: heroDownSideImage\n};\nlet heroDownImage = new Image();\nheroDownImage.src = heroDownSheet;\nlet heroDown = {\n  image: heroDownImage\n};\n\nconst spriteOptions = [\n  heroUp,\n  heroUpSide,\n  heroSide,\n  heroDownSide,\n  heroDown,\n  heroDownSide,\n  heroSide,\n  heroUpSide\n];\n\nclass HeroPrefab extends Dna.GameObject {\n  constructor(canvas, ammoText, mouse, crosshair, hurtboxes, heroHitbox) {\n    super(canvas, {}, []);\n\n    let image = new Dna.Components.Image(hero_default);\n    image.updateOptions(heroDown);\n    let heroImage = new Dna.GameObject(this, {}, [image]);\n\n    let reloadingText = new Dna.GameObject(this, { y: -20 }, [\n      new Dna.Components.Text({ text: \"RELOADING\" })\n    ]);\n    reloadingText.setActive(false);\n\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hitboxSet: heroHitbox\n      })\n    );\n\n    let unitAngle = new UnitAngle(crosshair);\n    this.addComponent(unitAngle);\n\n    this.addComponent(new ImageAngle(image, unitAngle.angle, spriteOptions, 1));\n\n    let gun = new Gun(\n      this,\n      {},\n      unitAngle.angle,\n      hurtboxes,\n      ammoText,\n      reloadingText\n    );\n\n    let physics = new Dna.Components.SimplePhysics();\n    this.addComponent(physics);\n\n    let audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.addComponent(audio);\n\n    this.unit = new Hero(\n      heroImage,\n      ammoText,\n      reloadingText,\n      mouse,\n      unitAngle.angle,\n      physics,\n      hurtboxes,\n      gun,\n      audio\n    );\n    this.addComponent(this.unit);\n  }\n}\n\nexport { HeroPrefab };\n","//TODO should not use hitboxes for this, doens't account for condition where unit moves past boundary in single frame\nclass Boundary extends Dna.GameObject {\n  constructor(parent, alignment, offset, width, height, hurtboxes) {\n    super(parent, alignment.getPosition(offset), [\n      new Dna.Components.Rectangle({ width: width, height: height })\n    ]);\n\n    //TODO reverse this logic, use callback on hero to handle collision detection\n    this.addComponent(\n      new Dna.Components.Hitbox({\n        width: width,\n        height: height,\n        hurtboxes: hurtboxes,\n        onCollision: alignment.onCollision\n      })\n    );\n  }\n}\n\nlet Alignments = {\n  TOP: {\n    getPosition: offset => {\n      return { y: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.height / 2;\n      hurtbox.gameObject.transform.y =\n        this.gameObject.transform.y + this.height / 2 + offset;\n    }\n  },\n  BOTTOM: {\n    getPosition: offset => {\n      return { y: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.height / 2;\n      hurtbox.gameObject.transform.y =\n        this.gameObject.transform.y - this.height / 2 - offset;\n    }\n  },\n  LEFT: {\n    getPosition: offset => {\n      return { x: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.width / 2;\n      hurtbox.gameObject.transform.x =\n        this.gameObject.transform.x + this.width / 2 + offset;\n    }\n  },\n  RIGHT: {\n    getPosition: offset => {\n      return { x: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.width / 2;\n      hurtbox.gameObject.transform.x =\n        this.gameObject.transform.x - this.width / 2 - offset;\n    }\n  }\n};\n\nexport { Boundary, Alignments };\n","class Movement extends Dna.Component {\n  constructor(physics, angle) {\n    super();\n\n    this.physics = physics;\n    this.angle = angle;\n  }\n\n  update(deltaTime) {\n    this.physics.angle.radians = this.angle.radians;\n  }\n}\n\n//TODO need to test this\nclass Ai extends Dna.Component {\n  constructor(hero, range, cooldown, attack) {\n    super();\n\n    this.range = range;\n    this.cooldown = 0;\n  }\n\n  canAttack() {\n    if (this.cooldown > 0 || this.range <= 0) return false;\n\n    return (\n      this.gameObject.transform.getDistanceToTransform(this.hero.transform) <=\n      this.range\n    );\n  }\n\n  attack() {\n    //TODO\n    // call callback\n    // set cooldown\n  }\n}\n\nclass Monster extends Dna.Component {\n  constructor(hp, hpText) {\n    super();\n\n    this.maxHp = hp;\n    this.hp = hp;\n\n    this.hpText = hpText;\n\n    this.setHpText();\n  }\n\n  setHpText() {\n    this.hpText.text = this.hp + \"/\" + this.maxHp;\n  }\n\n  takeDamage(damage) {\n    this.hp = Math.max(0, this.hp - damage);\n    this.setHpText();\n\n    if (this.hp <= 0) {\n      this.gameObject.destroy();\n    }\n  }\n\n  knockback(direction) {\n    let knockbackPhysics = new Dna.Components.Physics({\n      angle: direction,\n      speed: 2,\n      maxDistance: 20,\n      callback: () => {\n        this.gameObject.removeComponent(knockbackPhysics);\n      }\n    });\n    this.gameObject.addComponent(knockbackPhysics);\n  }\n}\n\nexport { Movement, Ai, Monster };\n","//import { EnemyComponent } from \"./Enemy\";\nimport { Movement, Monster } from \"./Monster\";\nimport { UnitAngle } from \"./UnitAngle\";\nimport { ImageAngle } from \"./ImageAngle\";\nimport slimeUpSheet from \"./assets/slime/slime1_back.png\";\nimport slimeDownSheet from \"./assets/slime/slime1_front.png\";\nimport slimeLeftSheet from \"./assets/slime/slime1_side.png\";\n\nconst MAX_HP = 100;\nconst RADIUS = 8;\nconst SPEED = 1;\nconst DAMAGE = 10;\n\n//TODO consolidate shared state to 1 object, allow image to read from its own values\nlet slime_default = {\n  width: 16,\n  height: 16,\n  loop: true,\n  numberOfFrames: 4,\n  ticksPerFrame: 5\n  //framesPerRow: 4\n};\nlet slimeUpImage = new Image();\nslimeUpImage.src = slimeUpSheet;\nlet slimeUp = {\n  image: slimeUpImage\n};\nlet slimeDownImage = new Image();\nslimeDownImage.src = slimeDownSheet;\nlet slimeDown = {\n  image: slimeDownImage\n};\nlet slimeSideImage = new Image();\nslimeSideImage.src = slimeLeftSheet;\nlet slimeSide = {\n  image: slimeSideImage\n};\n\nconst spriteOptions = [slimeUp, slimeSide, slimeDown, slimeSide];\n\nclass Slime extends Dna.GameObject {\n  constructor(canvas, position, hero, heroHurtbox, enemyHurtboxes) {\n    super(canvas, position, []);\n\n    let image = new Dna.Components.Image(slime_default);\n    image.updateOptions(slimeDown);\n    new Dna.GameObject(this, {}, [image]);\n    //this.addComponent(image);\n\n    let hpText = new Dna.Components.Text({});\n    new Dna.GameObject(this, { y: -20 }, [hpText]);\n\n    let hurtbox = new Dna.Components.Hitcircle({\n      radius: RADIUS,\n      hitboxSet: enemyHurtboxes\n    });\n    this.addComponent(hurtbox);\n\n    let unitAngle = new UnitAngle(hero);\n    this.addComponent(unitAngle);\n\n    this.addComponent(\n      new ImageAngle(image, unitAngle.angle, spriteOptions, -1)\n    );\n\n    let physics = new Dna.Components.Physics({ speed: SPEED });\n    this.addComponent(physics);\n\n    this.addComponent(new Movement(physics, unitAngle.angle));\n\n    this.unit = new Monster(MAX_HP, hpText);\n    this.addComponent(this.unit);\n\n    //TODO this logic should be reveresed, onhit should happen on hero, these stored in monsterHitboxes\n    //TODO add via component array\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hurtboxes: heroHurtbox,\n        onCollisionEnter: heroHurtbox => {\n          hero.unit.takeDamage(10, this);\n        }\n      })\n    );\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.addComponent(this.audio);\n  }\n}\n\nexport { Slime };\n","import crosshair from \"./assets/crosshair.png\";\n\nclass CrosshairComponent extends Dna.Component {\n  constructor(mouse) {\n    super();\n\n    this.mouse = mouse;\n  }\n\n  update(deltaTime) {\n    this.gameObject.transform.x = this.mouse.x;\n    this.gameObject.transform.y = this.mouse.y;\n  }\n}\n\nlet crosshairImage = new Image();\ncrosshairImage.src = crosshair;\n\nclass Crosshair extends Dna.GameObject {\n  constructor(parent, mouse) {\n    super(parent, {}, [\n      new CrosshairComponent(mouse),\n      new Dna.Components.Image({ width: 21, height: 21, image: crosshairImage })\n    ]);\n  }\n}\n\nexport { Crosshair };\n","import { HeroPrefab } from \"./HeroPrefab\";\nimport { Boundary, Alignments } from \"./Boundary\";\nimport { Slime } from \"./Slime\";\nimport { Crosshair } from \"./Crosshair\";\n\nimport tileSet from \"./assets/tileset.png\";\n\nimport wSprite from \"./assets/controls/w.png\";\nimport aSprite from \"./assets/controls/a.png\";\nimport sSprite from \"./assets/controls/s.png\";\nimport dSprite from \"./assets/controls/d.png\";\nimport tabSprite from \"./assets/controls/tab.png\";\nimport rSprite from \"./assets/controls/r.png\";\nimport mouseSprite from \"./assets/controls/mouse.png\";\nimport leftClickSprite from \"./assets/controls/leftclick.png\";\n\nlet floorImage = new Dna.Dom.Image(tileSet);\nlet background = new Dna.StaticCanvas(\n  document.getElementById(\"background\"),\n  [floorImage.load],\n  background => {\n    new Dna.GameObject(background, {}, [\n      new Dna.Components.Image({\n        image: floorImage,\n        type: Dna.Components.Image.types.randomTiled,\n        width: 40,\n        height: 8,\n        destWidth: 700,\n        destHeight: 500,\n        xWeight: [0.8, 0.05, 0.05, 0.05, 0.05],\n        yWeight: [1]\n      })\n    ]);\n  }\n);\n\n//TODO find an elegant way to preload these\nlet wImage = new Dna.Dom.Image(wSprite);\nlet aImage = new Dna.Dom.Image(aSprite);\nlet sImage = new Dna.Dom.Image(sSprite);\nlet dImage = new Dna.Dom.Image(dSprite);\nlet tabImage = new Dna.Dom.Image(tabSprite);\nlet rImage = new Dna.Dom.Image(rSprite);\nlet mouseImage = new Dna.Dom.Image(mouseSprite);\nlet leftClickImage = new Dna.Dom.Image(leftClickSprite);\nlet foreground = new Dna.StaticCanvas(\n  document.getElementById(\"foreground\"),\n  [\n    wImage.load,\n    aImage.load,\n    sImage.load,\n    dImage.load,\n    tabImage.load,\n    rImage.load,\n    mouseImage.load,\n    leftClickImage.load\n  ],\n  foreground => {\n    console.log(wImage);\n\n    function getImageOptions(image) {\n      return {\n        image: image,\n        width: 100,\n        height: 100,\n        destWidth: 30,\n        destHeight: 30,\n        type: Dna.Components.Image.types.stretched\n      };\n    }\n\n    let controls = new Dna.GameObject(foreground, { x: -250, y: 160 });\n\n    let moveControls = new Dna.GameObject(controls, { x: -40, y: 30 }, []);\n    new Dna.GameObject(moveControls, { y: -25 }, [\n      new Dna.Components.Text({ text: \"Move\" })\n    ]);\n    new Dna.GameObject(moveControls, { y: -5 }, [\n      new Dna.Components.Image(getImageOptions(wImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20, x: -25 }, [\n      new Dna.Components.Image(getImageOptions(aImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20 }, [\n      new Dna.Components.Image(getImageOptions(sImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20, x: 25 }, [\n      new Dna.Components.Image(getImageOptions(dImage))\n    ]);\n\n    let shootControls = new Dna.GameObject(controls, { x: -40, y: -30 });\n    new Dna.GameObject(shootControls, { x: -25, y: -10 }, [\n      new Dna.Components.Text({ text: \"Aim\" })\n    ]);\n    new Dna.GameObject(shootControls, { x: -25, y: 10 }, [\n      new Dna.Components.Image(getImageOptions(mouseImage))\n    ]);\n    new Dna.GameObject(shootControls, { x: 25, y: -10 }, [\n      new Dna.Components.Text({ text: \"Shoot\" })\n    ]);\n    new Dna.GameObject(shootControls, { x: 25, y: 10 }, [\n      new Dna.Components.Image(getImageOptions(leftClickImage))\n    ]);\n\n    let gunControls = new Dna.GameObject(controls, { x: 40 });\n    new Dna.GameObject(gunControls, { y: -35 }, [\n      new Dna.Components.Text({ text: \"Reload\" })\n    ]);\n    new Dna.GameObject(gunControls, { y: -15 }, [\n      new Dna.Components.Image(getImageOptions(rImage))\n    ]);\n    new Dna.GameObject(gunControls, { y: 15 }, [\n      new Dna.Components.Text({ text: \"Weapon\" })\n    ]);\n    new Dna.GameObject(gunControls, { y: 35 }, [\n      new Dna.Components.Image(getImageOptions(tabImage))\n    ]);\n    //TODO fix this, dont depend on calling this\n    foreground.renderAll();\n  }\n);\n\nlet canvas = new Dna.Canvas(document.getElementById(\"canvas\"));\n\nlet mouse = new Dna.Input.Mouse(canvas);\n\nlet crosshair = new Crosshair(canvas, mouse);\n\nlet ammoTextContainer = new Dna.GameObject(canvas, { x: 300, y: 200 });\nlet ammoText = new Dna.Components.Text({});\nnew Dna.GameObject(ammoTextContainer, { y: -10 }, [\n  new Dna.Components.Text({ text: \"AMMO\" })\n]);\nnew Dna.GameObject(ammoTextContainer, { y: 10 }, [ammoText]);\n\nlet heroHurtbox = [];\nlet enemyHurtboxes = [];\n\nlet hero = new HeroPrefab(\n  canvas,\n  ammoText,\n  mouse,\n  crosshair,\n  enemyHurtboxes,\n  heroHurtbox\n);\n\nnew Slime(canvas, { x: 200, y: 150 }, hero, heroHurtbox, enemyHurtboxes);\nnew Slime(canvas, { x: 200, y: -150 }, hero, heroHurtbox, enemyHurtboxes);\nnew Slime(canvas, { x: -200, y: 150 }, hero, heroHurtbox, enemyHurtboxes);\nnew Slime(canvas, { x: -200, y: -150 }, hero, heroHurtbox, enemyHurtboxes);\n\nconst X_OFFSET = 350;\nconst Y_OFFSET = 250;\nconst X_LONG = 500;\nconst Y_LONG = 700;\nconst SHORT = 20;\nlet topBoundary = new Boundary(\n  canvas,\n  Alignments.TOP,\n  -Y_OFFSET,\n  Y_LONG,\n  SHORT,\n  heroHurtbox\n);\nlet bottomBoundary = new Boundary(\n  canvas,\n  Alignments.BOTTOM,\n  Y_OFFSET,\n  Y_LONG,\n  SHORT,\n  heroHurtbox\n);\nlet leftBoundary = new Boundary(\n  canvas,\n  Alignments.LEFT,\n  -X_OFFSET,\n  SHORT,\n  X_LONG,\n  heroHurtbox\n);\nlet rightBoundary = new Boundary(\n  canvas,\n  Alignments.RIGHT,\n  X_OFFSET,\n  SHORT,\n  X_LONG,\n  heroHurtbox\n);\n"]}