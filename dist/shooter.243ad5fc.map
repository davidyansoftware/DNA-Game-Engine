{"version":3,"sources":["demos/shooter/ImageAngle.js","demos/shooter/GunState.js","demos/shooter/Bullet.js","demos/shooter/GunData.js","demos/shooter/Gun.js","demos/shooter/Knockback.js","demos/shooter/Hero.js","demos/shooter/UnitAngle.js","demos/shooter/HeroPrefab.js","demos/shooter/Boundary.js","demos/shooter/Monster.js","demos/shooter/Slime.js","demos/shooter/Crosshair.js","demos/shooter/shooter.js"],"names":["ImageAngle","image","angle","options","defaultXScale","console","log","offset","Math","PI","length","deltaTime","radians","increment","index","floor","updateOptions","gameObject","transform","xScale","Dna","Component","GunState","gunData","audio","Components","Audio","volume","reloading","clipAmmo","clipSize","extraAmmo","SPEED","RADIUS","DAMAGE","BulletComponent","physics","maxDistance","damage","Bullet","parent","position","hurtboxes","addGameObject","GameObject","rotation","Utilities","Radians","Physics","speed","callback","destroy","addComponent","bullet","Hitcircle","radius","onCollisionEnter","hurtbox","play","gunHit","unit","takeDamage","knockback","getCurrentDirection","pistolUpImage","Image","src","pistolUpSprite","pistolUp","width","height","pistolDiagUpImage","pistolDiagUpSprite","pistolDiagUp","pistolSideImage","pistolSideSprite","pistolSide","pistolDiagDownImage","pistolDiagDownSprite","pistolDiagDown","pistolDownImage","pistolDownSprite","pistolDown","bulletImage","bulletSprite","Pistol","name","shootClip","pistolShoot","emptyClip","pistolEmpty","reloadClip","pistolReload","cooldown","spriteOptions","spread","generateBullets","gun","getCanvas","getAbsoluteCenter","getNewAngle","shotgunUpImage","shotgunUpSprite","shotgunUp","shotgunDiagUpImage","shotgunDiagUpSprite","shotgunDiagUp","shotgunSideImage","shotgunSideSprite","shotgunSide","shotgunDiagDownImage","shotgunDiagDownSprite","shotgunDiagDown","shotgunDownImage","shotgunDownSprite","shotgunDown","Shotgun","shotgunShoot","i","flamethrowerUpImage","flamethrowerUpSprite","flamethrowerUp","flamethrowerDiagUpImage","flamethrowerDiagUpSprite","flamethrowerDiagUp","flamethrowerSideImage","flamethrowerSideSprite","flamethrowerSide","flamethrowerDiagDownImage","flamethrowerDiagDownSprite","flamethrowerDiagDown","flamethrowerDownImage","flamethrowerDownSprite","flamethrowerDown","flameImage","flameSprite","Flamethrower","flamethrowerShoot","ticksPerFrame","numberOfFrames","RELOAD_TIME","EMPTY_COOLDOWN","GUN_STATES","GunComponent","ammoText","reloadingText","gunImage","emptyCooldown","gunIndex","gunState","keyboard","Input","Keyboard","reload","changeWeapon","updateAmmoText","finishReload","setActive","totalAmmo","min","max","stopReload","weaponSwapClip","text","GunPosition","Vector","x","y","Gun","Knockback","distanceTraveled","total","removeComponent","CLIP_SIZE","TOTAL_AMMO","Hero","mouse","invulnerable","coordinates","Coordinates","source","knockbackPhysics","left","add","UNIT_LEFT","right","UNIT_RIGHT","up","UNIT_UP","down","UNIT_DOWN","leftClick","shoot","magnitude","xv","yv","UnitAngle","target","getAngleToTransform","hero_default","loop","heroUpImage","heroUpSheet","heroUp","heroUpSideImage","heroUpSideSheet","heroUpSide","heroSideImage","heroSideSheet","heroSide","heroDownSideImage","heroDownSideSheet","heroDownSide","heroDownImage","heroDownSheet","heroDown","HeroPrefab","canvas","crosshair","heroHitbox","heroImage","Text","hitboxSet","unitAngle","SimplePhysics","Boundary","alignment","getPosition","Rectangle","Hitbox","onCollision","Alignments","TOP","BOTTOM","LEFT","RIGHT","Movement","Ai","hero","range","attack","getDistanceToTransform","Monster","hp","hpText","maxHp","setHpText","direction","MAX_HP","slime_default","slimeUpImage","slimeUpSheet","slimeUp","slimeDownImage","slimeDownSheet","slimeDown","slimeSideImage","slimeLeftSheet","slimeSide","Slime","heroHurtbox","enemyHurtboxes","CrosshairComponent","crosshairImage","Crosshair","floorImage","Dom","tileSet","background","StaticCanvas","document","getElementById","load","type","types","randomTiled","destWidth","destHeight","xWeight","yWeight","wImage","wSprite","aImage","aSprite","sImage","sSprite","dImage","dSprite","tabImage","tabSprite","rImage","rSprite","mouseImage","mouseSprite","leftClickImage","leftClickSprite","foreground","getImageOptions","stretched","controls","moveControls","shootControls","gunControls","renderAll","Canvas","Mouse","ammoTextContainer","X_OFFSET","Y_OFFSET","X_LONG","Y_LONG","SHORT","topBoundary","bottomBoundary","leftBoundary","rightBoundary"],"mappings":"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","file":"shooter.243ad5fc.map","sourceRoot":"..","sourcesContent":["class ImageAngle extends Dna.Component {\n  constructor(image, angle, options, defaultXScale) {\n    super();\n\n    this.image = image;\n    this.angle = angle;\n    this.options = options;\n    this.defaultXScale = defaultXScale;\n\n    console.log(this.options);\n    this.offset = Math.PI / this.options.length;\n  }\n\n  update(deltaTime) {\n    let angle =\n      ((this.angle.radians % (Math.PI * 2)) + Math.PI * 2) % (Math.PI * 2);\n    let increment = (Math.PI * 2) / this.options.length;\n    let index =\n      (Math.floor((angle + this.offset) / increment) + this.options.length) %\n      this.options.length;\n\n    this.image.updateOptions(this.options[index]);\n\n    //console.log(this.image.height);\n    //console.log(this.image.width);\n\n    this.image.gameObject.transform.xScale =\n      angle < Math.PI ? this.defaultXScale : -this.defaultXScale;\n  }\n}\n\nexport { ImageAngle };\n","class GunState {\n  constructor(gunData) {\n    this.gunData = gunData;\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n\n    this.reloading = false;\n    this.clipAmmo = gunData.clipSize;\n    this.extraAmmo = gunData.extraAmmo;\n  }\n}\n\nexport { GunState };\n","//import { Knockback } from \"./Knockback\";\n//TODO store onhitclip in monsterdata\nimport gunHit from \"./assets/sounds/gun_hit.wav\";\n\nconst SPEED = 5;\nconst RADIUS = 2;\n//const MAX_DISTANCE = 500;\nconst DAMAGE = 10;\n\nlet audio = new Dna.Components.Audio({ volume: 0.05 });\n\n//TODO this should just be a physics tween\nclass BulletComponent extends Dna.Component {\n  constructor(physics, maxDistance) {\n    super();\n\n    this.physics = physics;\n    //this.distanceTraveled = 0;\n    this.maxDistance = maxDistance;\n    this.damage = DAMAGE;\n  }\n\n  update(deltaTime) {\n    //this.distanceTraveled += this.physics.distanceTraveled.total;\n    //if (this.distanceTraveled > this.maxDistance) {\n    //  this.gameObject.destroy();\n    //}\n  }\n}\n\nclass Bullet extends Dna.GameObject {\n  constructor(parent, position, image, angle, hurtboxes, maxDistance) {\n    //position.rotation = angle.addRadians(-Math.PI / 2);\n    super(parent, position, [\n      //new Dna.Components.Polygon({ radius: RADIUS, fillStyle: color })\n      //new Dna.Components.Image({ image: image })\n      //image\n    ]);\n\n    this.addGameObject(\n      new Dna.GameObject(\n        this,\n        {\n          rotation: new Dna.Utilities.Radians(angle.radians - Math.PI / 2)\n        },\n        [image]\n      )\n    );\n\n    let physics = new Dna.Components.Physics({\n      speed: SPEED,\n      angle: angle,\n      maxDistance: maxDistance,\n      callback: () => {\n        this.destroy();\n      }\n    });\n    this.addComponent(physics);\n\n    let bullet = new BulletComponent(physics, maxDistance);\n    this.addComponent(bullet);\n\n    //TODO reverse this logic, keep track of bullet array in hero\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hurtboxes: hurtboxes,\n        onCollisionEnter: hurtbox => {\n          this.destroy();\n\n          //audio.play(gunHit);\n          hurtbox.gameObject.audio.play(gunHit);\n\n          hurtbox.gameObject.unit.takeDamage(bullet.damage);\n\n          hurtbox.gameObject.unit.knockback(\n            this.transform.getCurrentDirection()\n          );\n        }\n      })\n    );\n  }\n}\n\nexport { Bullet };\n","import { Bullet } from \"./Bullet\";\nimport pistolUpSprite from \"./assets/pistol/up.png\";\nimport pistolDiagUpSprite from \"./assets/pistol/diagup.png\";\nimport pistolSideSprite from \"./assets/pistol/side.png\";\nimport pistolDiagDownSprite from \"./assets/pistol/diagdown.png\";\nimport pistolDownSprite from \"./assets/pistol/down.png\";\nimport pistolShoot from \"./assets/sounds/pistol_shoot.wav\";\nimport pistolEmpty from \"./assets/sounds/gun_empty.wav\";\nimport pistolReload from \"./assets/sounds/gun_reload.mp3\";\nimport bulletSprite from \"./assets/bullets/bullet.png\";\n\nlet pistolUpImage = new Image();\npistolUpImage.src = pistolUpSprite;\nlet pistolUp = {\n  width: 14,\n  height: 12,\n  image: pistolUpImage\n};\nlet pistolDiagUpImage = new Image();\npistolDiagUpImage.src = pistolDiagUpSprite;\nlet pistolDiagUp = {\n  width: 14,\n  height: 12,\n  image: pistolDiagUpImage\n};\nlet pistolSideImage = new Image();\npistolSideImage.src = pistolSideSprite;\nlet pistolSide = {\n  width: 16,\n  height: 8,\n  image: pistolSideImage\n};\nlet pistolDiagDownImage = new Image();\npistolDiagDownImage.src = pistolDiagDownSprite;\nlet pistolDiagDown = {\n  width: 14,\n  height: 11,\n  image: pistolDiagDownImage\n};\nlet pistolDownImage = new Image();\npistolDownImage.src = pistolDownSprite;\nlet pistolDown = {\n  width: 14,\n  height: 12,\n  image: pistolDownImage\n};\n\nlet bulletImage = new Image();\nbulletImage.src = bulletSprite;\nlet bullet = new Dna.Components.Image({\n  width: 6,\n  height: 6,\n  image: bulletImage\n});\n\nlet Pistol = {\n  name: \"Pistol\",\n  shootClip: pistolShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 20,\n  extraAmmo: 100,\n  cooldown: 0.5,\n  //cooldown: 500,\n  //default option for ui and initialization?\n  spriteOptions: [\n    pistolUp,\n    pistolDiagUp,\n    pistolSide,\n    pistolDiagDown,\n    pistolDown,\n    pistolDiagDown,\n    pistolSide,\n    pistolDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 8),\n  generateBullets(gun, hurtboxes) {\n    new Bullet(\n      gun.getCanvas(),\n      gun.transform.getAbsoluteCenter(),\n      bullet,\n      //new Dna.Utilities.Radians(gun.angle.radians),\n      gun.angle.getNewAngle(this.spread),\n      hurtboxes,\n      600\n    );\n  }\n};\n\nimport shotgunUpSprite from \"./assets/shotgun/up.png\";\nimport shotgunDiagUpSprite from \"./assets/shotgun/diagup.png\";\nimport shotgunSideSprite from \"./assets/shotgun/side.png\";\nimport shotgunDiagDownSprite from \"./assets/shotgun/diagdown.png\";\nimport shotgunDownSprite from \"./assets/shotgun/down.png\";\nimport shotgunShoot from \"./assets/sounds/shotgun_shoot.wav\";\n\nlet shotgunUpImage = new Image();\nshotgunUpImage.src = shotgunUpSprite;\nlet shotgunUp = {\n  width: 8,\n  height: 12,\n  image: shotgunUpImage\n};\nlet shotgunDiagUpImage = new Image();\nshotgunDiagUpImage.src = shotgunDiagUpSprite;\nlet shotgunDiagUp = {\n  width: 14,\n  height: 14,\n  image: shotgunDiagUpImage\n};\nlet shotgunSideImage = new Image();\nshotgunSideImage.src = shotgunSideSprite;\nlet shotgunSide = {\n  width: 18,\n  height: 9,\n  image: shotgunSideImage\n};\nlet shotgunDiagDownImage = new Image();\nshotgunDiagDownImage.src = shotgunDiagDownSprite;\nlet shotgunDiagDown = {\n  width: 17,\n  height: 10,\n  image: shotgunDiagDownImage\n};\nlet shotgunDownImage = new Image();\nshotgunDownImage.src = shotgunDownSprite;\nlet shotgunDown = {\n  width: 8,\n  height: 12,\n  image: shotgunDownImage\n};\n\nlet Shotgun = {\n  name: \"Shotgun\",\n  shootClip: shotgunShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 8,\n  extraAmmo: 50,\n  cooldown: 1.5,\n  //default option for ui and initialization?\n  spriteOptions: [\n    shotgunUp,\n    shotgunDiagUp,\n    shotgunSide,\n    shotgunDiagDown,\n    shotgunDown,\n    shotgunDiagDown,\n    shotgunSide,\n    shotgunDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 4),\n  generateBullets(gun, hurtboxes) {\n    for (let i = 0; i < 4; i++) {\n      new Bullet(\n        gun.getCanvas(),\n        gun.transform.getAbsoluteCenter(),\n        bullet,\n        gun.angle.getNewAngle(this.spread),\n        hurtboxes,\n        200\n      );\n    }\n  }\n};\n\nimport flamethrowerUpSprite from \"./assets/flamethrower/up.png\";\nimport flamethrowerDiagUpSprite from \"./assets/flamethrower/diagup.png\";\nimport flamethrowerSideSprite from \"./assets/flamethrower/side.png\";\nimport flamethrowerDiagDownSprite from \"./assets/flamethrower/diagdown.png\";\nimport flamethrowerDownSprite from \"./assets/flamethrower/down.png\";\nimport flameSprite from \"./assets/bullets/flame.png\";\nimport flamethrowerShoot from \"./assets/sounds/flamethrower_shoot.wav\";\n\nlet flamethrowerUpImage = new Image();\nflamethrowerUpImage.src = flamethrowerUpSprite;\nlet flamethrowerUp = {\n  width: 14,\n  height: 17,\n  image: flamethrowerUpImage\n};\nlet flamethrowerDiagUpImage = new Image();\nflamethrowerDiagUpImage.src = flamethrowerDiagUpSprite;\nlet flamethrowerDiagUp = {\n  width: 16,\n  height: 16,\n  image: flamethrowerDiagUpImage\n};\nlet flamethrowerSideImage = new Image();\nflamethrowerSideImage.src = flamethrowerSideSprite;\nlet flamethrowerSide = {\n  width: 26,\n  height: 9,\n  image: flamethrowerSideImage\n};\nlet flamethrowerDiagDownImage = new Image();\nflamethrowerDiagDownImage.src = flamethrowerDiagDownSprite;\nlet flamethrowerDiagDown = {\n  width: 19,\n  height: 14,\n  image: flamethrowerDiagDownImage\n};\nlet flamethrowerDownImage = new Image();\nflamethrowerDownImage.src = flamethrowerDownSprite;\nlet flamethrowerDown = {\n  width: 14,\n  height: 17,\n  image: flamethrowerDownImage\n};\n\nlet flameImage = new Image();\nflameImage.src = flameSprite;\n\nlet Flamethrower = {\n  name: \"Flamethrower\",\n  shootClip: flamethrowerShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 100,\n  extraAmmo: 1000,\n  cooldown: 0.04,\n  //default option for ui and initialization?\n  spriteOptions: [\n    flamethrowerUp,\n    flamethrowerDiagUp,\n    flamethrowerSide,\n    flamethrowerDiagDown,\n    flamethrowerDown,\n    flamethrowerDiagDown,\n    flamethrowerSide,\n    flamethrowerDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 6),\n  generateBullets(gun, hurtboxes) {\n    //console.log(gun);\n    //let spread = new Dna.Utilities.Radians(Math.PI / 4);\n    //for (let i = 0; i < 4; i++) {\n    new Bullet(\n      gun.getCanvas(),\n      gun.transform.getAbsoluteCenter(),\n      new Dna.Components.Image({\n        width: 13,\n        height: 10,\n        image: flameImage,\n\n        ticksPerFrame: 5,\n        numberOfFrames: 2\n      }),\n      gun.angle.getNewAngle(this.spread),\n      hurtboxes,\n      200\n    );\n    //}\n  }\n};\n\nexport { Pistol, Shotgun, Flamethrower };\n","import { ImageAngle } from \"./ImageAngle\";\nimport { GunState } from \"./GunState\";\nimport { Pistol, Shotgun, Flamethrower } from \"./GunData\";\nimport weaponSwapClip from \"./assets/sounds/weapon_swap.mp3\";\n\nconst RELOAD_TIME = 2;\nconst EMPTY_COOLDOWN = 0.5;\nconst GUN_STATES = [\n  new GunState(Pistol),\n  new GunState(Shotgun),\n  new GunState(Flamethrower)\n];\n\nclass GunComponent extends Dna.Component {\n  constructor(ammoText, reloadingText, gunImage, hurtboxes) {\n    super();\n\n    this.ammoText = ammoText;\n    this.reloadingText = reloadingText;\n    this.gunImage = gunImage;\n    this.hurtboxes = hurtboxes;\n\n    this.cooldown = 0;\n    this.emptyCooldown = 0;\n    //this.reloading = false;\n    this.reloading = 0;\n\n    this.gunIndex = 0;\n    this.gunState = GUN_STATES[this.gunIndex];\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.keyboard = new Dna.Input.Keyboard(\n      {},\n      {\n        82: () => {\n          this.reload();\n        },\n        9: () => {\n          this.changeWeapon();\n        }\n      }\n    );\n\n    this.updateAmmoText();\n  }\n\n  update(deltaTime) {\n    this.cooldown -= deltaTime;\n    this.emptyCooldown -= deltaTime;\n    if (this.reloading > 0) {\n      this.reloading -= deltaTime;\n      if (this.reloading <= 0) {\n        this.finishReload();\n      }\n    }\n  }\n\n  shoot() {\n    if (this.cooldown > 0) return;\n    if (this.reloading > 0) return;\n    if (this.gunState.clipAmmo <= 0) {\n      if (this.emptyCooldown <= 0) {\n        this.emptyCooldown = EMPTY_COOLDOWN;\n        this.audio.play(this.gunState.gunData.emptyClip);\n      }\n      return;\n    }\n\n    this.gunState.gunData.generateBullets(this.gameObject, this.hurtboxes);\n    this.audio.play(this.gunState.gunData.shootClip);\n\n    this.gunState.clipAmmo--;\n    this.cooldown = this.gunState.gunData.cooldown;\n\n    this.updateAmmoText();\n  }\n\n  reload() {\n    if (this.gunState.clipAmmo >= this.gunState.gunData.clipSize) return;\n    if (this.gunState.extraAmmo <= 0) return;\n    if (this.reloading > 0) return;\n\n    this.reloading = RELOAD_TIME;\n    this.reloadingText.setActive(true);\n\n    this.audio.play(this.gunState.gunData.reloadClip);\n  }\n\n  stopReload() {\n    this.reloading = 0;\n    this.reloadingText.setActive(false);\n  }\n\n  finishReload() {\n    let totalAmmo = this.gunState.clipAmmo + this.gunState.extraAmmo;\n    this.gunState.clipAmmo = Math.min(\n      totalAmmo,\n      this.gunState.gunData.clipSize\n    );\n    this.gunState.extraAmmo = Math.max(0, totalAmmo - this.gunState.clipAmmo);\n\n    this.stopReload();\n    this.updateAmmoText();\n  }\n\n  changeWeapon(gunState) {\n    this.stopReload();\n\n    this.gunIndex = (this.gunIndex + 1) % GUN_STATES.length;\n    this.gunState = GUN_STATES[this.gunIndex];\n\n    this.audio.play(weaponSwapClip);\n\n    this.gunImage.options = this.gunState.gunData.spriteOptions;\n\n    this.updateAmmoText();\n  }\n\n  updateAmmoText() {\n    this.ammoText.text = this.gunState.clipAmmo + \"/\" + this.gunState.extraAmmo;\n  }\n}\n\nclass GunPosition extends Dna.Component {\n  constructor(angle) {\n    super();\n\n    //TODO just set this transform.position to be this\n    this.angle = angle;\n    this.position = new Dna.Utilities.Vector(angle, 10);\n  }\n\n  update(deltaTime) {\n    // change transform based on angle\n    this.gameObject.transform.x = this.position.x;\n    this.gameObject.transform.y = this.position.y;\n  }\n}\n\nclass Gun extends Dna.GameObject {\n  constructor(parent, position, angle, hurtboxes, ammoText, reloadingText) {\n    console.log(parent);\n    super(parent, position, []);\n\n    this.angle = angle;\n\n    let image = new Dna.Components.Image(\n      GUN_STATES[0].gunData.spriteOptions[0]\n    );\n    new Dna.GameObject(this, {}, [image]);\n\n    this.gunImage = new ImageAngle(\n      image,\n      angle,\n      GUN_STATES[0].gunData.spriteOptions,\n      1\n    );\n    this.addComponent(this.gunImage);\n\n    this.addComponent(new GunPosition(angle));\n\n    this.gun = new GunComponent(\n      ammoText,\n      reloadingText,\n      this.gunImage,\n      hurtboxes\n    );\n    this.addComponent(this.gun);\n  }\n}\n\nexport { Gun };\n","//TODO this should be a tween of physics\nclass Knockback extends Dna.Component {\n  constructor(physics, maxDistance) {\n    super();\n\n    this.physics = physics;\n    this.maxDistance = maxDistance;\n\n    this.distanceTraveled = 0;\n  }\n\n  update(deltaTime) {\n    this.distanceTraveled += this.physics.distanceTraveled.total;\n    if (this.distanceTraveled >= this.maxDistance) {\n      this.gameObject.removeComponent(this.physics);\n      this.gameObject.removeComponent(this);\n    }\n  }\n}\n\nexport { Knockback };\n","import { Gun } from \"./Gun\";\nimport { Bullet } from \"./Bullet\";\nimport { Knockback } from \"./Knockback\";\n\nconst SPEED = 3;\nconst CLIP_SIZE = 20;\nconst TOTAL_AMMO = 100;\nconst RELOAD_TIME = 2;\n\nclass Hero extends Dna.Component {\n  constructor(\n    image,\n    ammoText,\n    reloadingText,\n    mouse,\n    angle,\n    physics,\n    hurtboxes,\n    gun,\n    audio\n  ) {\n    super();\n\n    this.keyboard = new Dna.Input.Keyboard({\n      87: \"up\",\n      83: \"down\",\n      65: \"left\",\n      68: \"right\"\n    });\n\n    this.image = image;\n\n    this.mouse = mouse;\n    this.angle = angle;\n    this.physics = physics;\n    //this.hurtboxes = hurtboxes;\n    //TODO dont need this if shooting is handled from gun component\n    this.gun = gun;\n    this.audio = audio;\n\n    this.invulnerable = 0;\n\n    this.coordinates = new Dna.Utilities.Coordinates(0, 0);\n  }\n\n  takeDamage(damage, source) {\n    if (this.invulnerable > 0) return;\n\n    console.log(\"taking damage: \" + damage);\n\n    //TODO angle should be based on the angle the monster hit\n    let knockbackPhysics = new Dna.Components.Physics({\n      angle: source.transform.getCurrentDirection(),\n      speed: 2\n    });\n    this.gameObject.addComponent(knockbackPhysics);\n    let knockback = new Knockback(knockbackPhysics, 20);\n    this.gameObject.addComponent(knockback);\n\n    this.invulnerable = 0.5;\n  }\n\n  //TODO update this to use regular physics class\n  update(deltaTime) {\n    this.coordinates.x = 0;\n    this.coordinates.y = 0;\n    if (this.keyboard.left)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_LEFT);\n    if (this.keyboard.right)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_RIGHT);\n    if (this.keyboard.up) this.coordinates.add(Dna.Utilities.Vector.UNIT_UP);\n    if (this.keyboard.down)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_DOWN);\n\n    //TODO control this from gun class\n    if (this.mouse.leftClick) this.gun.gun.shoot();\n\n    if (this.coordinates.magnitude > 0) this.coordinates.magnitude = SPEED;\n    this.physics.xv = this.coordinates.x;\n    this.physics.yv = this.coordinates.y;\n\n    this.cooldown -= deltaTime;\n    this.emptyCooldown -= deltaTime;\n    this.invulnerable -= deltaTime;\n  }\n\n  render() {\n    //TODO flash if invulnerable\n    super.render();\n  }\n}\n\nexport { Hero };\n","class UnitAngle extends Dna.Component {\n  constructor(target) {\n    super();\n\n    this.target = target;\n\n    this.angle = new Dna.Utilities.Radians(0);\n  }\n\n  update(deltaTime) {\n    this.angle.radians = this.gameObject.transform.getAngleToTransform(\n      this.target.transform\n    );\n  }\n}\nexport { UnitAngle };\n","import { Hero } from \"./Hero\";\nimport { Gun } from \"./Gun\";\nimport { UnitAngle } from \"./UnitAngle\";\nimport { ImageAngle } from \"./ImageAngle\";\nimport { Pistol, Shotgun, Flamethrower } from \"./GunData\";\n//TODO need to impliment idle animation when hero is not moving\n//import heroIdleSheet from \"./assets/hero/idle.png\";\nimport heroUpSheet from \"./assets/hero/up.png\";\nimport heroUpSideSheet from \"./assets/hero/upside.png\";\nimport heroSideSheet from \"./assets/hero/side.png\";\nimport heroDownSideSheet from \"./assets/hero/downside.png\";\nimport heroDownSheet from \"./assets/hero/down.png\";\n\nconst RADIUS = 10;\nlet hero_default = {\n  width: 20,\n  height: 24,\n  loop: true,\n  numberOfFrames: 4,\n  ticksPerFrame: 5\n  //framesPerRow: 4\n};\nlet heroUpImage = new Image();\nheroUpImage.src = heroUpSheet;\nlet heroUp = {\n  image: heroUpImage\n};\nlet heroUpSideImage = new Image();\nheroUpSideImage.src = heroUpSideSheet;\nlet heroUpSide = {\n  image: heroUpSideImage\n};\nlet heroSideImage = new Image();\nheroSideImage.src = heroSideSheet;\nlet heroSide = {\n  image: heroSideImage\n};\nlet heroDownSideImage = new Image();\nheroDownSideImage.src = heroDownSideSheet;\nlet heroDownSide = {\n  image: heroDownSideImage\n};\nlet heroDownImage = new Image();\nheroDownImage.src = heroDownSheet;\nlet heroDown = {\n  image: heroDownImage\n};\n\nconst spriteOptions = [\n  heroUp,\n  heroUpSide,\n  heroSide,\n  heroDownSide,\n  heroDown,\n  heroDownSide,\n  heroSide,\n  heroUpSide\n];\n\nclass HeroPrefab extends Dna.GameObject {\n  constructor(canvas, ammoText, mouse, crosshair, hurtboxes, heroHitbox) {\n    super(canvas, {}, []);\n\n    let image = new Dna.Components.Image(hero_default);\n    image.updateOptions(heroDown);\n    let heroImage = new Dna.GameObject(this, {}, [image]);\n\n    let reloadingText = new Dna.GameObject(this, { y: -20 }, [\n      new Dna.Components.Text({ text: \"RELOADING\" })\n    ]);\n    reloadingText.setActive(false);\n\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hitboxSet: heroHitbox\n      })\n    );\n\n    let unitAngle = new UnitAngle(crosshair);\n    this.addComponent(unitAngle);\n\n    this.addComponent(new ImageAngle(image, unitAngle.angle, spriteOptions, 1));\n\n    let gun = new Gun(\n      this,\n      {},\n      unitAngle.angle,\n      hurtboxes,\n      ammoText,\n      reloadingText\n    );\n\n    let physics = new Dna.Components.SimplePhysics();\n    this.addComponent(physics);\n\n    let audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.addComponent(audio);\n\n    this.unit = new Hero(\n      heroImage,\n      ammoText,\n      reloadingText,\n      mouse,\n      unitAngle.angle,\n      physics,\n      hurtboxes,\n      gun,\n      audio\n    );\n    this.addComponent(this.unit);\n  }\n}\n\nexport { HeroPrefab };\n","//TODO should not use hitboxes for this, doens't account for condition where unit moves past boundary in single frame\nclass Boundary extends Dna.GameObject {\n  constructor(parent, alignment, offset, width, height, hurtboxes) {\n    super(parent, alignment.getPosition(offset), [\n      new Dna.Components.Rectangle({ width: width, height: height })\n    ]);\n\n    //TODO reverse this logic, use callback on hero to handle collision detection\n    this.addComponent(\n      new Dna.Components.Hitbox({\n        width: width,\n        height: height,\n        hurtboxes: hurtboxes,\n        onCollision: alignment.onCollision\n      })\n    );\n  }\n}\n\nlet Alignments = {\n  TOP: {\n    getPosition: offset => {\n      return { y: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.height / 2;\n      hurtbox.gameObject.transform.y =\n        this.gameObject.transform.y + this.height / 2 + offset;\n    }\n  },\n  BOTTOM: {\n    getPosition: offset => {\n      return { y: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.height / 2;\n      hurtbox.gameObject.transform.y =\n        this.gameObject.transform.y - this.height / 2 - offset;\n    }\n  },\n  LEFT: {\n    getPosition: offset => {\n      return { x: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.width / 2;\n      hurtbox.gameObject.transform.x =\n        this.gameObject.transform.x + this.width / 2 + offset;\n    }\n  },\n  RIGHT: {\n    getPosition: offset => {\n      return { x: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.width / 2;\n      hurtbox.gameObject.transform.x =\n        this.gameObject.transform.x - this.width / 2 - offset;\n    }\n  }\n};\n\nexport { Boundary, Alignments };\n","import { Knockback } from \"./Knockback\";\n\nclass Movement extends Dna.Component {\n  constructor(physics, angle) {\n    super();\n\n    this.physics = physics;\n    this.angle = angle;\n  }\n\n  update(deltaTime) {\n    this.physics.angle.radians = this.angle.radians;\n  }\n}\n\n//TODO need to test this\nclass Ai extends Dna.Component {\n  constructor(hero, range, cooldown, attack) {\n    super();\n\n    this.range = range;\n    this.cooldown = 0;\n  }\n\n  canAttack() {\n    if (this.cooldown > 0 || this.range <= 0) return false;\n\n    return (\n      this.gameObject.transform.getDistanceToTransform(this.hero.transform) <=\n      this.range\n    );\n  }\n\n  attack() {\n    //TODO\n    // call callback\n    // set cooldown\n  }\n}\n\nclass Monster extends Dna.Component {\n  constructor(hp, hpText) {\n    super();\n\n    this.maxHp = hp;\n    this.hp = hp;\n\n    this.hpText = hpText;\n\n    this.setHpText();\n  }\n\n  setHpText() {\n    this.hpText.text = this.hp + \"/\" + this.maxHp;\n  }\n\n  takeDamage(damage) {\n    this.hp = Math.max(0, this.hp - damage);\n    this.setHpText();\n\n    if (this.hp <= 0) {\n      this.gameObject.destroy();\n    }\n  }\n\n  knockback(direction) {\n    let knockbackPhysics = new Dna.Components.Physics({\n      angle: direction,\n      speed: 2\n    });\n    this.gameObject.addComponent(knockbackPhysics);\n    let knockback = new Knockback(knockbackPhysics, 20);\n    this.gameObject.addComponent(knockback);\n  }\n}\n\nexport { Movement, Ai, Monster };\n","//import { EnemyComponent } from \"./Enemy\";\nimport { Movement, Monster } from \"./Monster\";\nimport { UnitAngle } from \"./UnitAngle\";\nimport { ImageAngle } from \"./ImageAngle\";\nimport slimeUpSheet from \"./assets/slime/slime1_back.png\";\nimport slimeDownSheet from \"./assets/slime/slime1_front.png\";\nimport slimeLeftSheet from \"./assets/slime/slime1_side.png\";\n\nconst MAX_HP = 100;\nconst RADIUS = 8;\nconst SPEED = 1;\nconst DAMAGE = 10;\n\n//TODO consolidate shared state to 1 object, allow image to read from its own values\nlet slime_default = {\n  width: 16,\n  height: 16,\n  loop: true,\n  numberOfFrames: 4,\n  ticksPerFrame: 5\n  //framesPerRow: 4\n};\nlet slimeUpImage = new Image();\nslimeUpImage.src = slimeUpSheet;\nlet slimeUp = {\n  image: slimeUpImage\n};\nlet slimeDownImage = new Image();\nslimeDownImage.src = slimeDownSheet;\nlet slimeDown = {\n  image: slimeDownImage\n};\nlet slimeSideImage = new Image();\nslimeSideImage.src = slimeLeftSheet;\nlet slimeSide = {\n  image: slimeSideImage\n};\n\nconst spriteOptions = [slimeUp, slimeSide, slimeDown, slimeSide];\n\nclass Slime extends Dna.GameObject {\n  constructor(canvas, position, hero, heroHurtbox, enemyHurtboxes) {\n    super(canvas, position, []);\n\n    let image = new Dna.Components.Image(slime_default);\n    image.updateOptions(slimeDown);\n    new Dna.GameObject(this, {}, [image]);\n    //this.addComponent(image);\n\n    let hpText = new Dna.Components.Text({});\n    new Dna.GameObject(this, { y: -20 }, [hpText]);\n\n    let hurtbox = new Dna.Components.Hitcircle({\n      radius: RADIUS,\n      hitboxSet: enemyHurtboxes\n    });\n    this.addComponent(hurtbox);\n\n    let unitAngle = new UnitAngle(hero);\n    this.addComponent(unitAngle);\n\n    this.addComponent(\n      new ImageAngle(image, unitAngle.angle, spriteOptions, -1)\n    );\n\n    let physics = new Dna.Components.Physics({ speed: SPEED });\n    this.addComponent(physics);\n\n    this.addComponent(new Movement(physics, unitAngle.angle));\n\n    this.unit = new Monster(MAX_HP, hpText);\n    this.addComponent(this.unit);\n\n    //TODO this logic should be reveresed, onhit should happen on hero, these stored in monsterHitboxes\n    //TODO add via component array\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hurtboxes: heroHurtbox,\n        onCollisionEnter: heroHurtbox => {\n          hero.unit.takeDamage(10, this);\n        }\n      })\n    );\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.addComponent(this.audio);\n  }\n}\n\nexport { Slime };\n","import crosshair from \"./assets/crosshair.png\";\n\nclass CrosshairComponent extends Dna.Component {\n  constructor(mouse) {\n    super();\n\n    this.mouse = mouse;\n  }\n\n  update(deltaTime) {\n    this.gameObject.transform.x = this.mouse.x;\n    this.gameObject.transform.y = this.mouse.y;\n  }\n}\n\nlet crosshairImage = new Image();\ncrosshairImage.src = crosshair;\n\nclass Crosshair extends Dna.GameObject {\n  constructor(parent, mouse) {\n    super(parent, {}, [\n      new CrosshairComponent(mouse),\n      new Dna.Components.Image({ width: 21, height: 21, image: crosshairImage })\n    ]);\n  }\n}\n\nexport { Crosshair };\n","import { HeroPrefab } from \"./HeroPrefab\";\nimport { Boundary, Alignments } from \"./Boundary\";\nimport { Slime } from \"./Slime\";\nimport { Crosshair } from \"./Crosshair\";\n\nimport tileSet from \"./assets/tileset.png\";\n\nimport wSprite from \"./assets/controls/w.png\";\nimport aSprite from \"./assets/controls/a.png\";\nimport sSprite from \"./assets/controls/s.png\";\nimport dSprite from \"./assets/controls/d.png\";\nimport tabSprite from \"./assets/controls/tab.png\";\nimport rSprite from \"./assets/controls/r.png\";\nimport mouseSprite from \"./assets/controls/mouse.png\";\nimport leftClickSprite from \"./assets/controls/leftclick.png\";\n\nlet floorImage = new Dna.Dom.Image(tileSet);\nlet background = new Dna.StaticCanvas(\n  document.getElementById(\"background\"),\n  [floorImage.load],\n  background => {\n    new Dna.GameObject(background, {}, [\n      new Dna.Components.Image({\n        image: floorImage,\n        type: Dna.Components.Image.types.randomTiled,\n        width: 40,\n        height: 8,\n        destWidth: 700,\n        destHeight: 500,\n        xWeight: [0.8, 0.05, 0.05, 0.05, 0.05],\n        yWeight: [1]\n      })\n    ]);\n  }\n);\n\n//TODO find an elegant way to preload these\nlet wImage = new Dna.Dom.Image(wSprite);\nlet aImage = new Dna.Dom.Image(aSprite);\nlet sImage = new Dna.Dom.Image(sSprite);\nlet dImage = new Dna.Dom.Image(dSprite);\nlet tabImage = new Dna.Dom.Image(tabSprite);\nlet rImage = new Dna.Dom.Image(rSprite);\nlet mouseImage = new Dna.Dom.Image(mouseSprite);\nlet leftClickImage = new Dna.Dom.Image(leftClickSprite);\nlet foreground = new Dna.StaticCanvas(\n  document.getElementById(\"foreground\"),\n  [\n    wImage.load,\n    aImage.load,\n    sImage.load,\n    dImage.load,\n    tabImage.load,\n    rImage.load,\n    mouseImage.load,\n    leftClickImage.load\n  ],\n  foreground => {\n    console.log(wImage);\n\n    function getImageOptions(image) {\n      return {\n        image: image,\n        width: 100,\n        height: 100,\n        destWidth: 30,\n        destHeight: 30,\n        type: Dna.Components.Image.types.stretched\n      };\n    }\n\n    let controls = new Dna.GameObject(foreground, { x: -250, y: 160 });\n\n    let moveControls = new Dna.GameObject(controls, { x: -40, y: 30 }, []);\n    new Dna.GameObject(moveControls, { y: -25 }, [\n      new Dna.Components.Text({ text: \"Move\" })\n    ]);\n    new Dna.GameObject(moveControls, { y: -5 }, [\n      new Dna.Components.Image(getImageOptions(wImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20, x: -25 }, [\n      new Dna.Components.Image(getImageOptions(aImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20 }, [\n      new Dna.Components.Image(getImageOptions(sImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20, x: 25 }, [\n      new Dna.Components.Image(getImageOptions(dImage))\n    ]);\n\n    let shootControls = new Dna.GameObject(controls, { x: -40, y: -30 });\n    new Dna.GameObject(shootControls, { x: -25, y: -10 }, [\n      new Dna.Components.Text({ text: \"Aim\" })\n    ]);\n    new Dna.GameObject(shootControls, { x: -25, y: 10 }, [\n      new Dna.Components.Image(getImageOptions(mouseImage))\n    ]);\n    new Dna.GameObject(shootControls, { x: 25, y: -10 }, [\n      new Dna.Components.Text({ text: \"Shoot\" })\n    ]);\n    new Dna.GameObject(shootControls, { x: 25, y: 10 }, [\n      new Dna.Components.Image(getImageOptions(leftClickImage))\n    ]);\n\n    let gunControls = new Dna.GameObject(controls, { x: 40 });\n    new Dna.GameObject(gunControls, { y: -35 }, [\n      new Dna.Components.Text({ text: \"Reload\" })\n    ]);\n    new Dna.GameObject(gunControls, { y: -15 }, [\n      new Dna.Components.Image(getImageOptions(rImage))\n    ]);\n    new Dna.GameObject(gunControls, { y: 15 }, [\n      new Dna.Components.Text({ text: \"Weapon\" })\n    ]);\n    new Dna.GameObject(gunControls, { y: 35 }, [\n      new Dna.Components.Image(getImageOptions(tabImage))\n    ]);\n    //TODO fix this, dont depend on calling this\n    foreground.renderAll();\n  }\n);\n\nlet canvas = new Dna.Canvas(document.getElementById(\"canvas\"));\n\nlet mouse = new Dna.Input.Mouse(canvas);\n\nlet crosshair = new Crosshair(canvas, mouse);\n\nlet ammoTextContainer = new Dna.GameObject(canvas, { x: 300, y: 200 });\nlet ammoText = new Dna.Components.Text({});\nnew Dna.GameObject(ammoTextContainer, { y: -10 }, [\n  new Dna.Components.Text({ text: \"AMMO\" })\n]);\nnew Dna.GameObject(ammoTextContainer, { y: 10 }, [ammoText]);\n\nlet heroHurtbox = [];\nlet enemyHurtboxes = [];\n\nlet hero = new HeroPrefab(\n  canvas,\n  ammoText,\n  mouse,\n  crosshair,\n  enemyHurtboxes,\n  heroHurtbox\n);\n\nnew Slime(canvas, { x: 200, y: 150 }, hero, heroHurtbox, enemyHurtboxes);\nnew Slime(canvas, { x: 200, y: -150 }, hero, heroHurtbox, enemyHurtboxes);\nnew Slime(canvas, { x: -200, y: 150 }, hero, heroHurtbox, enemyHurtboxes);\nnew Slime(canvas, { x: -200, y: -150 }, hero, heroHurtbox, enemyHurtboxes);\n\nconst X_OFFSET = 350;\nconst Y_OFFSET = 250;\nconst X_LONG = 500;\nconst Y_LONG = 700;\nconst SHORT = 20;\nlet topBoundary = new Boundary(\n  canvas,\n  Alignments.TOP,\n  -Y_OFFSET,\n  Y_LONG,\n  SHORT,\n  heroHurtbox\n);\nlet bottomBoundary = new Boundary(\n  canvas,\n  Alignments.BOTTOM,\n  Y_OFFSET,\n  Y_LONG,\n  SHORT,\n  heroHurtbox\n);\nlet leftBoundary = new Boundary(\n  canvas,\n  Alignments.LEFT,\n  -X_OFFSET,\n  SHORT,\n  X_LONG,\n  heroHurtbox\n);\nlet rightBoundary = new Boundary(\n  canvas,\n  Alignments.RIGHT,\n  X_OFFSET,\n  SHORT,\n  X_LONG,\n  heroHurtbox\n);\n"]}