{"version":3,"sources":["demos/shooter/ImageAngle.js","demos/shooter/GunState.js","demos/shooter/Bullet.js","src/Scene.js","demos/shooter/GunData.js","demos/shooter/Gun.js","demos/shooter/Hero.js","demos/shooter/UnitAngle.js","demos/shooter/HeroPrefab.js","demos/shooter/Boundary.js","demos/shooter/Monster.js","demos/shooter/Slime.js","demos/shooter/Crosshair.js","demos/shooter/shooter.js"],"names":["ImageAngle","image","angle","options","defaultXScale","console","log","offset","Math","PI","length","deltaTime","radians","increment","index","floor","updateOptions","gameObject","transform","xScale","Dna","Component","GunState","gunData","audio","Components","Audio","volume","reloading","clipAmmo","clipSize","extraAmmo","SPEED","RADIUS","DAMAGE","Bullet","parent","position","hurtboxes","maxDistance","addGameObject","GameObject","rotation","Utilities","Radians","physics","Physics","speed","callback","destroy","addComponent","Hitcircle","radius","onCollisionEnter","hurtbox","play","gunHit","unit","takeDamage","knockback","getCurrentDirection","Scene","canvases","assets","start","canvas","addCanvas","Assets","key","asset","scene","push","load","then","window","requestAnimationFrame","currTime","gameLoop","Promise","resolve","all","bulletImage","Dom","Image","bulletSprite","flameImage","flameSprite","bulletAssets","bullet","flame","width","height","pistolUpImage","pistolUpSprite","pistolDiagUpImage","pistolDiagUpSprite","pistolSideImage","pistolSideSprite","pistolDiagDownImage","pistolDiagDownSprite","pistolDownImage","pistolDownSprite","pistolAssets","up","diagUp","side","diagDown","down","pistolUp","pistolDiagUp","pistolSide","pistolDiagDown","pistolDown","Pistol","name","shootClip","pistolShoot","emptyClip","pistolEmpty","reloadClip","pistolReload","cooldown","spriteOptions","spread","generateBullets","gun","getCanvas","getAbsoluteCenter","getNewAngle","shotgunUpImage","shotgunUpSprite","shotgunDiagUpImage","shotgunDiagUpSprite","shotgunSideImage","shotgunSideSprite","shotgunDiagDownImage","shotgunDiagDownSprite","shotgunDownImage","shotgunDownSprite","shotgunAssets","shotgunUp","shotgunDiagUp","shotgunSide","shotgunDiagDown","shotgunDown","Shotgun","shotgunShoot","i","flamethrowerUpImage","flamethrowerUpSprite","flamethrowerDiagUpImage","flamethrowerDiagUpSprite","flamethrowerSideImage","flamethrowerSideSprite","flamethrowerDiagDownImage","flamethrowerDiagDownSprite","flamethrowerDownImage","flamethrowerDownSprite","flamethrowerAssets","flamethrowerUp","flamethrowerDiagUp","flamethrowerSide","flamethrowerDiagDown","flamethrowerDown","Flamethrower","flamethrowerShoot","ticksPerFrame","numberOfFrames","gunAssets","bullets","pistol","shotgun","flamethrower","RELOAD_TIME","EMPTY_COOLDOWN","GUN_STATES","GunComponent","ammoText","reloadingText","gunImage","emptyCooldown","gunIndex","gunState","keyboard","Input","Keyboard","reload","changeWeapon","updateAmmoText","finishReload","setActive","totalAmmo","min","max","stopReload","weaponSwapClip","text","GunPosition","Vector","x","y","Gun","CLIP_SIZE","TOTAL_AMMO","Hero","mouse","invulnerable","coordinates","Coordinates","damage","source","knockbackPhysics","removeComponent","left","add","UNIT_LEFT","right","UNIT_RIGHT","UNIT_UP","UNIT_DOWN","leftClick","shoot","magnitude","xv","yv","UnitAngle","target","getAngleToTransform","heroUpImage","heroUpSheet","heroUpSideImage","heroUpSideSheet","heroSideImage","heroSideSheet","heroDownSideImage","heroDownSideSheet","heroDownImage","heroDownSheet","heroAssets","upSide","downSide","hero_default","loop","heroUp","heroUpSide","heroSide","heroDownSide","heroDown","HeroPrefab","crosshair","heroHitbox","heroImage","Text","hitboxSet","unitAngle","SimplePhysics","Boundary","alignment","getPosition","Rectangle","Hitbox","onCollision","Alignments","TOP","BOTTOM","LEFT","RIGHT","Movement","Ai","hero","range","attack","getDistanceToTransform","Monster","hp","hpText","maxHp","setHpText","direction","slimeUpImage","slimeUpSheet","slimeSideImage","slimeLeftSheet","slimeDownImage","slimeDownSheet","slimeAssets","MAX_HP","slime_default","slimeUp","slimeSide","slimeDown","Slime","heroHurtbox","enemyHurtboxes","CrosshairComponent","crosshairImage","src","Crosshair","floorImage","tileSet","background","StaticCanvas","document","getElementById","type","types","randomTiled","destWidth","destHeight","xWeight","yWeight","wImage","wSprite","aImage","aSprite","sImage","sSprite","dImage","dSprite","tabImage","tabSprite","rImage","rSprite","mouseImage","mouseSprite","leftClickImage","leftClickSprite","foreground","getImageOptions","stretched","controls","moveControls","shootControls","gunControls","Canvas","Mouse","ammoTextContainer","X_OFFSET","Y_OFFSET","X_LONG","Y_LONG","SHORT","topBoundary","bottomBoundary","leftBoundary","rightBoundary","slime","guns"],"mappings":"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","file":"shooter.243ad5fc.map","sourceRoot":"..","sourcesContent":["class ImageAngle extends Dna.Component {\n  constructor(image, angle, options, defaultXScale) {\n    super();\n\n    this.image = image;\n    this.angle = angle;\n    this.options = options;\n    this.defaultXScale = defaultXScale;\n\n    console.log(this.options);\n    this.offset = Math.PI / this.options.length;\n  }\n\n  update(deltaTime) {\n    let angle =\n      ((this.angle.radians % (Math.PI * 2)) + Math.PI * 2) % (Math.PI * 2);\n    let increment = (Math.PI * 2) / this.options.length;\n    let index =\n      (Math.floor((angle + this.offset) / increment) + this.options.length) %\n      this.options.length;\n\n    this.image.updateOptions(this.options[index]);\n\n    //console.log(this.image.height);\n    //console.log(this.image.width);\n\n    this.image.gameObject.transform.xScale =\n      angle < Math.PI ? this.defaultXScale : -this.defaultXScale;\n  }\n}\n\nexport { ImageAngle };\n","class GunState {\n  constructor(gunData) {\n    this.gunData = gunData;\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n\n    this.reloading = false;\n    this.clipAmmo = gunData.clipSize;\n    this.extraAmmo = gunData.extraAmmo;\n  }\n}\n\nexport { GunState };\n","//TODO store onhitclip in monsterdata\nimport gunHit from \"./assets/sounds/gun_hit.wav\";\n\nconst SPEED = 5;\nconst RADIUS = 2;\n//const MAX_DISTANCE = 500;\nconst DAMAGE = 10;\n\nlet audio = new Dna.Components.Audio({ volume: 0.05 });\n\nclass Bullet extends Dna.GameObject {\n  constructor(parent, position, image, angle, hurtboxes, maxDistance) {\n    super(parent, position, []);\n\n    // this is a nested object to handle rotation seperate from physics\n    this.addGameObject(\n      new Dna.GameObject(\n        this,\n        {\n          rotation: new Dna.Utilities.Radians(angle.radians - Math.PI / 2)\n        },\n        [image]\n      )\n    );\n\n    let physics = new Dna.Components.Physics({\n      speed: SPEED,\n      angle: angle,\n      maxDistance: maxDistance,\n      callback: () => {\n        this.destroy();\n      }\n    });\n    this.addComponent(physics);\n\n    //TODO reverse this logic, keep track of bullet array in hero\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hurtboxes: hurtboxes,\n        onCollisionEnter: hurtbox => {\n          this.destroy();\n\n          //audio.play(gunHit);\n          hurtbox.gameObject.audio.play(gunHit);\n\n          hurtbox.gameObject.unit.takeDamage(DAMAGE);\n\n          hurtbox.gameObject.unit.knockback(\n            this.transform.getCurrentDirection()\n          );\n        }\n      })\n    );\n  }\n}\n\nexport { Bullet };\n","class Scene {\n  constructor(canvases, assets, start) {\n    //this.canvases = canvases || [];\n    this.canvases = [];\n    for (let canvas of canvases) {\n      this.addCanvas(canvas);\n    }\n\n    this.assets = assets || new Assets();\n\n    this.start = start;\n  }\n\n  addAssets(key, asset) {\n    this.assets.key = asset;\n  }\n\n  addCanvas(canvas) {\n    canvas.scene = this;\n    this.canvases.push(canvas);\n  }\n\n  //TODO handle gameloop from here\n  load() {\n    this.assets.load.then(() => {\n      console.log(this);\n      this.start();\n      window.requestAnimationFrame(currTime => {\n        for (let canvas of this.canvases) {\n          canvas.gameLoop(currTime);\n        }\n      });\n    });\n  }\n}\n\nclass Assets {\n  constructor(assets = {}) {\n    this.assets = assets;\n\n    this.load = new Promise(resolve => {\n      let assets = [];\n      for (let asset in this.assets) {\n        console.log(asset);\n        console.log(this.assets);\n        //TODO get function?\n        assets.push(this.assets[asset].load);\n      }\n      Promise.all(assets).then(resolve);\n    });\n  }\n\n  /*\n  load() {\n    return new Promise(resolve => {\n      let assets = [];\n      for (let asset in this.assets) {\n        assets.push(this.assets[asset].load);\n      }\n      Promise.all(assets).then(resolve);\n    });\n  }\n  */\n\n  get(key) {\n    return this.assets[key];\n  }\n}\n\nexport { Scene, Assets };\n","import { Bullet } from \"./Bullet\";\nimport { Assets } from \"../../src/Scene\";\n\nimport pistolShoot from \"./assets/sounds/pistol_shoot.wav\";\nimport shotgunShoot from \"./assets/sounds/shotgun_shoot.wav\";\nimport flamethrowerShoot from \"./assets/sounds/flamethrower_shoot.wav\";\nimport pistolEmpty from \"./assets/sounds/gun_empty.wav\";\nimport pistolReload from \"./assets/sounds/gun_reload.mp3\";\n\nimport bulletSprite from \"./assets/bullets/bullet.png\";\nimport flameSprite from \"./assets/bullets/flame.png\";\nlet bulletImage = new Dna.Dom.Image(bulletSprite);\nlet flameImage = new Dna.Dom.Image(flameSprite);\n\nlet bulletAssets = new Assets({\n  bullet: bulletImage,\n  flame: flameImage\n});\n\n//TODO this forces 1 component onto many objects\nlet bullet = new Dna.Components.Image({\n  width: 6,\n  height: 6,\n  image: bulletImage\n});\n\nimport pistolUpSprite from \"./assets/pistol/up.png\";\nimport pistolDiagUpSprite from \"./assets/pistol/diagup.png\";\nimport pistolSideSprite from \"./assets/pistol/side.png\";\nimport pistolDiagDownSprite from \"./assets/pistol/diagdown.png\";\nimport pistolDownSprite from \"./assets/pistol/down.png\";\nlet pistolUpImage = new Dna.Dom.Image(pistolUpSprite);\nlet pistolDiagUpImage = new Dna.Dom.Image(pistolDiagUpSprite);\nlet pistolSideImage = new Dna.Dom.Image(pistolSideSprite);\nlet pistolDiagDownImage = new Dna.Dom.Image(pistolDiagDownSprite);\nlet pistolDownImage = new Dna.Dom.Image(pistolDownSprite);\n\nlet pistolAssets = new Assets({\n  up: pistolUpImage,\n  diagUp: pistolDiagUpImage,\n  side: pistolSideImage,\n  diagDown: pistolDiagDownImage,\n  down: pistolDownImage\n});\n\nlet pistolUp = {\n  width: 14,\n  height: 12,\n  image: pistolUpImage\n};\nlet pistolDiagUp = {\n  width: 14,\n  height: 12,\n  image: pistolDiagUpImage\n};\nlet pistolSide = {\n  width: 16,\n  height: 8,\n  image: pistolSideImage\n};\nlet pistolDiagDown = {\n  width: 14,\n  height: 11,\n  image: pistolDiagDownImage\n};\nlet pistolDown = {\n  width: 14,\n  height: 12,\n  image: pistolDownImage\n};\n\nlet Pistol = {\n  name: \"Pistol\",\n  shootClip: pistolShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 20,\n  extraAmmo: 100,\n  cooldown: 0.5,\n  //cooldown: 500,\n  //default option for ui and initialization?\n  spriteOptions: [\n    pistolUp,\n    pistolDiagUp,\n    pistolSide,\n    pistolDiagDown,\n    pistolDown,\n    pistolDiagDown,\n    pistolSide,\n    pistolDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 8),\n  generateBullets(gun, hurtboxes) {\n    new Bullet(\n      gun.getCanvas(),\n      gun.transform.getAbsoluteCenter(),\n      bullet,\n      gun.angle.getNewAngle(this.spread),\n      hurtboxes,\n      600\n    );\n  }\n};\n\nimport shotgunUpSprite from \"./assets/shotgun/up.png\";\nimport shotgunDiagUpSprite from \"./assets/shotgun/diagup.png\";\nimport shotgunSideSprite from \"./assets/shotgun/side.png\";\nimport shotgunDiagDownSprite from \"./assets/shotgun/diagdown.png\";\nimport shotgunDownSprite from \"./assets/shotgun/down.png\";\nlet shotgunUpImage = new Dna.Dom.Image(shotgunUpSprite);\nlet shotgunDiagUpImage = new Dna.Dom.Image(shotgunDiagUpSprite);\nlet shotgunSideImage = new Dna.Dom.Image(shotgunSideSprite);\nlet shotgunDiagDownImage = new Dna.Dom.Image(shotgunDiagDownSprite);\nlet shotgunDownImage = new Dna.Dom.Image(shotgunDownSprite);\n\nlet shotgunAssets = new Assets({\n  up: shotgunUpImage,\n  diagUp: shotgunDiagUpImage,\n  side: shotgunSideImage,\n  diagDown: shotgunDiagDownImage,\n  down: shotgunDownImage\n});\n\nlet shotgunUp = {\n  width: 8,\n  height: 12,\n  image: shotgunUpImage\n};\nlet shotgunDiagUp = {\n  width: 14,\n  height: 14,\n  image: shotgunDiagUpImage\n};\nlet shotgunSide = {\n  width: 18,\n  height: 9,\n  image: shotgunSideImage\n};\nlet shotgunDiagDown = {\n  width: 17,\n  height: 10,\n  image: shotgunDiagDownImage\n};\nlet shotgunDown = {\n  width: 8,\n  height: 12,\n  image: shotgunDownImage\n};\n\nlet Shotgun = {\n  name: \"Shotgun\",\n  shootClip: shotgunShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 8,\n  extraAmmo: 50,\n  cooldown: 1.5,\n  //default option for ui and initialization?\n  spriteOptions: [\n    shotgunUp,\n    shotgunDiagUp,\n    shotgunSide,\n    shotgunDiagDown,\n    shotgunDown,\n    shotgunDiagDown,\n    shotgunSide,\n    shotgunDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 4),\n  generateBullets(gun, hurtboxes) {\n    for (let i = 0; i < 4; i++) {\n      new Bullet(\n        gun.getCanvas(),\n        gun.transform.getAbsoluteCenter(),\n        bullet,\n        gun.angle.getNewAngle(this.spread),\n        hurtboxes,\n        200\n      );\n    }\n  }\n};\n\nimport flamethrowerUpSprite from \"./assets/flamethrower/up.png\";\nimport flamethrowerDiagUpSprite from \"./assets/flamethrower/diagup.png\";\nimport flamethrowerSideSprite from \"./assets/flamethrower/side.png\";\nimport flamethrowerDiagDownSprite from \"./assets/flamethrower/diagdown.png\";\nimport flamethrowerDownSprite from \"./assets/flamethrower/down.png\";\nlet flamethrowerUpImage = new Dna.Dom.Image(flamethrowerUpSprite);\nlet flamethrowerDiagUpImage = new Dna.Dom.Image(flamethrowerDiagUpSprite);\nlet flamethrowerSideImage = new Dna.Dom.Image(flamethrowerSideSprite);\nlet flamethrowerDiagDownImage = new Dna.Dom.Image(flamethrowerDiagDownSprite);\nlet flamethrowerDownImage = new Dna.Dom.Image(flamethrowerDownSprite);\n\nlet flamethrowerAssets = new Assets({\n  up: flamethrowerUpImage,\n  diagUp: flamethrowerDiagUpImage,\n  side: flamethrowerSideImage,\n  diagDown: flamethrowerDiagDownImage,\n  down: flamethrowerDownImage\n});\n\nlet flamethrowerUp = {\n  width: 14,\n  height: 17,\n  image: flamethrowerUpImage\n};\nlet flamethrowerDiagUp = {\n  width: 16,\n  height: 16,\n  image: flamethrowerDiagUpImage\n};\nlet flamethrowerSide = {\n  width: 26,\n  height: 9,\n  image: flamethrowerSideImage\n};\nlet flamethrowerDiagDown = {\n  width: 19,\n  height: 14,\n  image: flamethrowerDiagDownImage\n};\nlet flamethrowerDown = {\n  width: 14,\n  height: 17,\n  image: flamethrowerDownImage\n};\n\nlet Flamethrower = {\n  name: \"Flamethrower\",\n  shootClip: flamethrowerShoot,\n  emptyClip: pistolEmpty,\n  reloadClip: pistolReload,\n  //bulletImage: bulletImage,\n  clipSize: 100,\n  extraAmmo: 1000,\n  cooldown: 0.04,\n  //default option for ui and initialization?\n  spriteOptions: [\n    flamethrowerUp,\n    flamethrowerDiagUp,\n    flamethrowerSide,\n    flamethrowerDiagDown,\n    flamethrowerDown,\n    flamethrowerDiagDown,\n    flamethrowerSide,\n    flamethrowerDiagUp\n  ],\n  spread: new Dna.Utilities.Radians(Math.PI / 6),\n  generateBullets(gun, hurtboxes) {\n    //console.log(gun);\n    //let spread = new Dna.Utilities.Radians(Math.PI / 4);\n    //for (let i = 0; i < 4; i++) {\n    new Bullet(\n      gun.getCanvas(),\n      gun.transform.getAbsoluteCenter(),\n      new Dna.Components.Image({\n        width: 13,\n        height: 10,\n        image: flameImage,\n\n        ticksPerFrame: 5,\n        numberOfFrames: 2\n      }),\n      gun.angle.getNewAngle(this.spread),\n      hurtboxes,\n      200\n    );\n    //}\n  }\n};\n\nlet gunAssets = new Assets({\n  bullets: bulletAssets,\n  pistol: pistolAssets,\n  shotgun: shotgunAssets,\n  flamethrower: flamethrowerAssets\n});\n\nexport { Pistol, Shotgun, Flamethrower, gunAssets };\n","import { ImageAngle } from \"./ImageAngle\";\nimport { GunState } from \"./GunState\";\nimport { Pistol, Shotgun, Flamethrower } from \"./GunData\";\nimport weaponSwapClip from \"./assets/sounds/weapon_swap.mp3\";\n\nconst RELOAD_TIME = 2;\nconst EMPTY_COOLDOWN = 0.5;\nconst GUN_STATES = [\n  new GunState(Pistol),\n  new GunState(Shotgun),\n  new GunState(Flamethrower)\n];\n\nclass GunComponent extends Dna.Component {\n  constructor(ammoText, reloadingText, gunImage, hurtboxes) {\n    super();\n\n    this.ammoText = ammoText;\n    this.reloadingText = reloadingText;\n    this.gunImage = gunImage;\n    this.hurtboxes = hurtboxes;\n\n    this.cooldown = 0;\n    this.emptyCooldown = 0;\n    //this.reloading = false;\n    this.reloading = 0;\n\n    this.gunIndex = 0;\n    this.gunState = GUN_STATES[this.gunIndex];\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.keyboard = new Dna.Input.Keyboard(\n      {},\n      {\n        82: () => {\n          this.reload();\n        },\n        9: () => {\n          this.changeWeapon();\n        }\n      }\n    );\n\n    this.updateAmmoText();\n  }\n\n  update(deltaTime) {\n    this.cooldown -= deltaTime;\n    this.emptyCooldown -= deltaTime;\n    if (this.reloading > 0) {\n      this.reloading -= deltaTime;\n      if (this.reloading <= 0) {\n        this.finishReload();\n      }\n    }\n  }\n\n  shoot() {\n    if (this.cooldown > 0) return;\n    if (this.reloading > 0) return;\n    if (this.gunState.clipAmmo <= 0) {\n      if (this.emptyCooldown <= 0) {\n        this.emptyCooldown = EMPTY_COOLDOWN;\n        this.audio.play(this.gunState.gunData.emptyClip);\n      }\n      return;\n    }\n\n    this.gunState.gunData.generateBullets(this.gameObject, this.hurtboxes);\n    this.audio.play(this.gunState.gunData.shootClip);\n\n    this.gunState.clipAmmo--;\n    this.cooldown = this.gunState.gunData.cooldown;\n\n    this.updateAmmoText();\n  }\n\n  reload() {\n    if (this.gunState.clipAmmo >= this.gunState.gunData.clipSize) return;\n    if (this.gunState.extraAmmo <= 0) return;\n    if (this.reloading > 0) return;\n\n    this.reloading = RELOAD_TIME;\n    this.reloadingText.setActive(true);\n\n    this.audio.play(this.gunState.gunData.reloadClip);\n  }\n\n  stopReload() {\n    this.reloading = 0;\n    this.reloadingText.setActive(false);\n  }\n\n  finishReload() {\n    let totalAmmo = this.gunState.clipAmmo + this.gunState.extraAmmo;\n    this.gunState.clipAmmo = Math.min(\n      totalAmmo,\n      this.gunState.gunData.clipSize\n    );\n    this.gunState.extraAmmo = Math.max(0, totalAmmo - this.gunState.clipAmmo);\n\n    this.stopReload();\n    this.updateAmmoText();\n  }\n\n  changeWeapon(gunState) {\n    this.stopReload();\n\n    this.gunIndex = (this.gunIndex + 1) % GUN_STATES.length;\n    this.gunState = GUN_STATES[this.gunIndex];\n\n    this.audio.play(weaponSwapClip);\n\n    this.gunImage.options = this.gunState.gunData.spriteOptions;\n\n    this.updateAmmoText();\n  }\n\n  updateAmmoText() {\n    this.ammoText.text = this.gunState.clipAmmo + \"/\" + this.gunState.extraAmmo;\n  }\n}\n\nclass GunPosition extends Dna.Component {\n  constructor(angle) {\n    super();\n\n    //TODO just set this transform.position to be this\n    this.angle = angle;\n    this.position = new Dna.Utilities.Vector(angle, 10);\n  }\n\n  update(deltaTime) {\n    // change transform based on angle\n    this.gameObject.transform.x = this.position.x;\n    this.gameObject.transform.y = this.position.y;\n  }\n}\n\nclass Gun extends Dna.GameObject {\n  constructor(parent, position, angle, hurtboxes, ammoText, reloadingText) {\n    console.log(parent);\n    super(parent, position, []);\n\n    this.angle = angle;\n\n    let image = new Dna.Components.Image(\n      GUN_STATES[0].gunData.spriteOptions[0]\n    );\n    new Dna.GameObject(this, {}, [image]);\n\n    this.gunImage = new ImageAngle(\n      image,\n      angle,\n      GUN_STATES[0].gunData.spriteOptions,\n      1\n    );\n    this.addComponent(this.gunImage);\n\n    this.addComponent(new GunPosition(angle));\n\n    this.gun = new GunComponent(\n      ammoText,\n      reloadingText,\n      this.gunImage,\n      hurtboxes\n    );\n    this.addComponent(this.gun);\n  }\n}\n\nexport { Gun };\n","import { Gun } from \"./Gun\";\nimport { Bullet } from \"./Bullet\";\n\nconst SPEED = 3;\nconst CLIP_SIZE = 20;\nconst TOTAL_AMMO = 100;\nconst RELOAD_TIME = 2;\n\nclass Hero extends Dna.Component {\n  constructor(\n    image,\n    ammoText,\n    reloadingText,\n    mouse,\n    angle,\n    physics,\n    hurtboxes,\n    gun,\n    audio\n  ) {\n    super();\n\n    this.keyboard = new Dna.Input.Keyboard({\n      87: \"up\",\n      83: \"down\",\n      65: \"left\",\n      68: \"right\"\n    });\n\n    this.image = image;\n\n    this.mouse = mouse;\n    this.angle = angle;\n    this.physics = physics;\n    //this.hurtboxes = hurtboxes;\n    //TODO dont need this if shooting is handled from gun component\n    this.gun = gun;\n    this.audio = audio;\n\n    this.invulnerable = 0;\n\n    this.coordinates = new Dna.Utilities.Coordinates(0, 0);\n  }\n\n  takeDamage(damage, source) {\n    if (this.invulnerable > 0) return;\n\n    console.log(\"taking damage: \" + damage);\n\n    //TODO angle should be based on the angle the monster hit\n    let knockbackPhysics = new Dna.Components.Physics({\n      angle: source.transform.getCurrentDirection(),\n      speed: 2,\n      maxDistance: 20,\n      callback: () => {\n        this.gameObject.removeComponent(knockbackPhysics);\n      }\n    });\n    this.gameObject.addComponent(knockbackPhysics);\n\n    this.invulnerable = 0.5;\n  }\n\n  //TODO update this to use regular physics class\n  update(deltaTime) {\n    this.coordinates.x = 0;\n    this.coordinates.y = 0;\n    if (this.keyboard.left)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_LEFT);\n    if (this.keyboard.right)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_RIGHT);\n    if (this.keyboard.up) this.coordinates.add(Dna.Utilities.Vector.UNIT_UP);\n    if (this.keyboard.down)\n      this.coordinates.add(Dna.Utilities.Vector.UNIT_DOWN);\n\n    //TODO control this from gun class\n    if (this.mouse.leftClick) this.gun.gun.shoot();\n\n    if (this.coordinates.magnitude > 0) this.coordinates.magnitude = SPEED;\n    this.physics.xv = this.coordinates.x;\n    this.physics.yv = this.coordinates.y;\n\n    this.cooldown -= deltaTime;\n    this.emptyCooldown -= deltaTime;\n    this.invulnerable -= deltaTime;\n  }\n\n  render() {\n    //TODO flash if invulnerable\n    super.render();\n  }\n}\n\nexport { Hero };\n","class UnitAngle extends Dna.Component {\n  constructor(target) {\n    super();\n\n    this.target = target;\n\n    this.angle = new Dna.Utilities.Radians(0);\n  }\n\n  update(deltaTime) {\n    this.angle.radians = this.gameObject.transform.getAngleToTransform(\n      this.target.transform\n    );\n  }\n}\nexport { UnitAngle };\n","import { Hero } from \"./Hero\";\nimport { Gun } from \"./Gun\";\nimport { UnitAngle } from \"./UnitAngle\";\nimport { ImageAngle } from \"./ImageAngle\";\nimport { Pistol, Shotgun, Flamethrower } from \"./GunData\";\n//TODO need to impliment idle animation when hero is not moving\n//import heroIdleSheet from \"./assets/hero/idle.png\";\nimport heroUpSheet from \"./assets/hero/up.png\";\nimport heroUpSideSheet from \"./assets/hero/upside.png\";\nimport heroSideSheet from \"./assets/hero/side.png\";\nimport heroDownSideSheet from \"./assets/hero/downside.png\";\nimport heroDownSheet from \"./assets/hero/down.png\";\nlet heroUpImage = new Dna.Dom.Image(heroUpSheet);\nlet heroUpSideImage = new Dna.Dom.Image(heroUpSideSheet);\nlet heroSideImage = new Dna.Dom.Image(heroSideSheet);\nlet heroDownSideImage = new Dna.Dom.Image(heroDownSideSheet);\nlet heroDownImage = new Dna.Dom.Image(heroDownSheet);\n\nlet heroAssets = new Dna.Assets({\n  up: heroUpImage,\n  upSide: heroUpSideImage,\n  side: heroSideImage,\n  downSide: heroDownSideImage,\n  down: heroDownImage\n});\n\nconst RADIUS = 10;\nlet hero_default = {\n  width: 20,\n  height: 24,\n  loop: true,\n  numberOfFrames: 4,\n  ticksPerFrame: 5\n  //framesPerRow: 4\n};\n\nlet heroUp = {\n  image: heroUpImage\n};\nlet heroUpSide = {\n  image: heroUpSideImage\n};\nlet heroSide = {\n  image: heroSideImage\n};\nlet heroDownSide = {\n  image: heroDownSideImage\n};\nlet heroDown = {\n  image: heroDownImage\n};\n\nconst spriteOptions = [\n  heroUp,\n  heroUpSide,\n  heroSide,\n  heroDownSide,\n  heroDown,\n  heroDownSide,\n  heroSide,\n  heroUpSide\n];\n\nclass HeroPrefab extends Dna.GameObject {\n  constructor(canvas, ammoText, mouse, crosshair, hurtboxes, heroHitbox) {\n    super(canvas, {}, []);\n\n    let image = new Dna.Components.Image(hero_default);\n    image.updateOptions(heroDown);\n    let heroImage = new Dna.GameObject(this, {}, [image]);\n\n    let reloadingText = new Dna.GameObject(this, { y: -20 }, [\n      new Dna.Components.Text({ text: \"RELOADING\" })\n    ]);\n    reloadingText.setActive(false);\n\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hitboxSet: heroHitbox\n      })\n    );\n\n    let unitAngle = new UnitAngle(crosshair);\n    this.addComponent(unitAngle);\n\n    this.addComponent(new ImageAngle(image, unitAngle.angle, spriteOptions, 1));\n\n    let gun = new Gun(\n      this,\n      {},\n      unitAngle.angle,\n      hurtboxes,\n      ammoText,\n      reloadingText\n    );\n\n    let physics = new Dna.Components.SimplePhysics();\n    this.addComponent(physics);\n\n    let audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.addComponent(audio);\n\n    this.unit = new Hero(\n      heroImage,\n      ammoText,\n      reloadingText,\n      mouse,\n      unitAngle.angle,\n      physics,\n      hurtboxes,\n      gun,\n      audio\n    );\n    this.addComponent(this.unit);\n  }\n}\n\nexport { HeroPrefab, heroAssets };\n","//TODO should not use hitboxes for this, doens't account for condition where unit moves past boundary in single frame\nclass Boundary extends Dna.GameObject {\n  constructor(parent, alignment, offset, width, height, hurtboxes) {\n    super(parent, alignment.getPosition(offset), [\n      new Dna.Components.Rectangle({ width: width, height: height })\n    ]);\n\n    //TODO reverse this logic, use callback on hero to handle collision detection\n    this.addComponent(\n      new Dna.Components.Hitbox({\n        width: width,\n        height: height,\n        hurtboxes: hurtboxes,\n        onCollision: alignment.onCollision\n      })\n    );\n  }\n}\n\nlet Alignments = {\n  TOP: {\n    getPosition: offset => {\n      return { y: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.height / 2;\n      hurtbox.gameObject.transform.y =\n        this.gameObject.transform.y + this.height / 2 + offset;\n    }\n  },\n  BOTTOM: {\n    getPosition: offset => {\n      return { y: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.height / 2;\n      hurtbox.gameObject.transform.y =\n        this.gameObject.transform.y - this.height / 2 - offset;\n    }\n  },\n  LEFT: {\n    getPosition: offset => {\n      return { x: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.width / 2;\n      hurtbox.gameObject.transform.x =\n        this.gameObject.transform.x + this.width / 2 + offset;\n    }\n  },\n  RIGHT: {\n    getPosition: offset => {\n      return { x: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.width / 2;\n      hurtbox.gameObject.transform.x =\n        this.gameObject.transform.x - this.width / 2 - offset;\n    }\n  }\n};\n\nexport { Boundary, Alignments };\n","class Movement extends Dna.Component {\n  constructor(physics, angle) {\n    super();\n\n    this.physics = physics;\n    this.angle = angle;\n  }\n\n  update(deltaTime) {\n    this.physics.angle.radians = this.angle.radians;\n  }\n}\n\n//TODO need to test this\nclass Ai extends Dna.Component {\n  constructor(hero, range, cooldown, attack) {\n    super();\n\n    this.range = range;\n    this.cooldown = 0;\n  }\n\n  canAttack() {\n    if (this.cooldown > 0 || this.range <= 0) return false;\n\n    return (\n      this.gameObject.transform.getDistanceToTransform(this.hero.transform) <=\n      this.range\n    );\n  }\n\n  attack() {\n    //TODO\n    // call callback\n    // set cooldown\n  }\n}\n\nclass Monster extends Dna.Component {\n  constructor(hp, hpText) {\n    super();\n\n    this.maxHp = hp;\n    this.hp = hp;\n\n    this.hpText = hpText;\n\n    this.setHpText();\n  }\n\n  setHpText() {\n    this.hpText.text = this.hp + \"/\" + this.maxHp;\n  }\n\n  takeDamage(damage) {\n    this.hp = Math.max(0, this.hp - damage);\n    this.setHpText();\n\n    if (this.hp <= 0) {\n      this.gameObject.destroy();\n    }\n  }\n\n  knockback(direction) {\n    let knockbackPhysics = new Dna.Components.Physics({\n      angle: direction,\n      speed: 2,\n      maxDistance: 20,\n      callback: () => {\n        this.gameObject.removeComponent(knockbackPhysics);\n      }\n    });\n    this.gameObject.addComponent(knockbackPhysics);\n  }\n}\n\nexport { Movement, Ai, Monster };\n","//import { EnemyComponent } from \"./Enemy\";\nimport { Movement, Monster } from \"./Monster\";\nimport { UnitAngle } from \"./UnitAngle\";\nimport { ImageAngle } from \"./ImageAngle\";\nimport slimeUpSheet from \"./assets/slime/slime1_back.png\";\nimport slimeDownSheet from \"./assets/slime/slime1_front.png\";\nimport slimeLeftSheet from \"./assets/slime/slime1_side.png\";\nlet slimeUpImage = new Dna.Dom.Image(slimeUpSheet);\nlet slimeSideImage = new Dna.Dom.Image(slimeLeftSheet);\nlet slimeDownImage = new Dna.Dom.Image(slimeDownSheet);\n\nlet slimeAssets = new Dna.Assets({\n  up: slimeUpImage,\n  side: slimeSideImage,\n  down: slimeDownImage\n});\n\nconst MAX_HP = 100;\nconst RADIUS = 8;\nconst SPEED = 1;\nconst DAMAGE = 10;\n\n//TODO consolidate shared state to 1 object, allow image to read from its own values\nlet slime_default = {\n  width: 16,\n  height: 16,\n  loop: true,\n  numberOfFrames: 4,\n  ticksPerFrame: 5\n  //framesPerRow: 4\n};\nlet slimeUp = {\n  image: slimeUpImage\n};\nlet slimeSide = {\n  image: slimeSideImage\n};\nlet slimeDown = {\n  image: slimeDownImage\n};\n\nconst spriteOptions = [slimeUp, slimeSide, slimeDown, slimeSide];\n\nclass Slime extends Dna.GameObject {\n  constructor(canvas, position, hero, heroHurtbox, enemyHurtboxes) {\n    super(canvas, position, []);\n\n    let image = new Dna.Components.Image(slime_default);\n    image.updateOptions(slimeDown);\n    new Dna.GameObject(this, {}, [image]);\n    //this.addComponent(image);\n\n    let hpText = new Dna.Components.Text({});\n    new Dna.GameObject(this, { y: -20 }, [hpText]);\n\n    let hurtbox = new Dna.Components.Hitcircle({\n      radius: RADIUS,\n      hitboxSet: enemyHurtboxes\n    });\n    this.addComponent(hurtbox);\n\n    let unitAngle = new UnitAngle(hero);\n    this.addComponent(unitAngle);\n\n    this.addComponent(\n      new ImageAngle(image, unitAngle.angle, spriteOptions, -1)\n    );\n\n    let physics = new Dna.Components.Physics({ speed: SPEED });\n    this.addComponent(physics);\n\n    this.addComponent(new Movement(physics, unitAngle.angle));\n\n    this.unit = new Monster(MAX_HP, hpText);\n    this.addComponent(this.unit);\n\n    //TODO this logic should be reveresed, onhit should happen on hero, these stored in monsterHitboxes\n    //TODO add via component array\n    this.addComponent(\n      new Dna.Components.Hitcircle({\n        radius: RADIUS,\n        hurtboxes: heroHurtbox,\n        onCollisionEnter: heroHurtbox => {\n          hero.unit.takeDamage(10, this);\n        }\n      })\n    );\n\n    this.audio = new Dna.Components.Audio({ volume: 0.1 });\n    this.addComponent(this.audio);\n  }\n}\n\nexport { Slime, slimeAssets };\n","import crosshair from \"./assets/crosshair.png\";\n\nclass CrosshairComponent extends Dna.Component {\n  constructor(mouse) {\n    super();\n\n    this.mouse = mouse;\n  }\n\n  update(deltaTime) {\n    this.gameObject.transform.x = this.mouse.x;\n    this.gameObject.transform.y = this.mouse.y;\n  }\n}\n\nlet crosshairImage = new Image();\ncrosshairImage.src = crosshair;\n\nclass Crosshair extends Dna.GameObject {\n  constructor(parent, mouse) {\n    super(parent, {}, [\n      new CrosshairComponent(mouse),\n      new Dna.Components.Image({ width: 21, height: 21, image: crosshairImage })\n    ]);\n  }\n}\n\nexport { Crosshair };\n","import { HeroPrefab, heroAssets } from \"./HeroPrefab\";\nimport { Boundary, Alignments } from \"./Boundary\";\nimport { Slime, slimeAssets } from \"./Slime\";\nimport { Crosshair } from \"./Crosshair\";\nimport { gunAssets } from \"./GunData\";\n\nimport tileSet from \"./assets/tileset.png\";\n\nimport wSprite from \"./assets/controls/w.png\";\nimport aSprite from \"./assets/controls/a.png\";\nimport sSprite from \"./assets/controls/s.png\";\nimport dSprite from \"./assets/controls/d.png\";\nimport tabSprite from \"./assets/controls/tab.png\";\nimport rSprite from \"./assets/controls/r.png\";\nimport mouseSprite from \"./assets/controls/mouse.png\";\nimport leftClickSprite from \"./assets/controls/leftclick.png\";\n\nlet floorImage = new Dna.Dom.Image(tileSet);\nlet background = new Dna.StaticCanvas(\n  document.getElementById(\"background\"),\n  [floorImage.load],\n  background => {\n    new Dna.GameObject(background, {}, [\n      new Dna.Components.Image({\n        image: floorImage,\n        type: Dna.Components.Image.types.randomTiled,\n        width: 40,\n        height: 8,\n        destWidth: 700,\n        destHeight: 500,\n        xWeight: [0.8, 0.05, 0.05, 0.05, 0.05],\n        yWeight: [1]\n      })\n    ]);\n  }\n);\n\n//TODO find an elegant way to preload these\nlet wImage = new Dna.Dom.Image(wSprite);\nlet aImage = new Dna.Dom.Image(aSprite);\nlet sImage = new Dna.Dom.Image(sSprite);\nlet dImage = new Dna.Dom.Image(dSprite);\nlet tabImage = new Dna.Dom.Image(tabSprite);\nlet rImage = new Dna.Dom.Image(rSprite);\nlet mouseImage = new Dna.Dom.Image(mouseSprite);\nlet leftClickImage = new Dna.Dom.Image(leftClickSprite);\nlet foreground = new Dna.StaticCanvas(\n  document.getElementById(\"foreground\"),\n  [\n    wImage.load,\n    aImage.load,\n    sImage.load,\n    dImage.load,\n    tabImage.load,\n    rImage.load,\n    mouseImage.load,\n    leftClickImage.load\n  ],\n  foreground => {\n    console.log(wImage);\n\n    function getImageOptions(image) {\n      return {\n        image: image,\n        width: 100,\n        height: 100,\n        destWidth: 30,\n        destHeight: 30,\n        type: Dna.Components.Image.types.stretched\n      };\n    }\n\n    let controls = new Dna.GameObject(foreground, { x: -250, y: 160 });\n\n    let moveControls = new Dna.GameObject(controls, { x: -40, y: 30 }, []);\n    new Dna.GameObject(moveControls, { y: -25 }, [\n      new Dna.Components.Text({ text: \"Move\" })\n    ]);\n    new Dna.GameObject(moveControls, { y: -5 }, [\n      new Dna.Components.Image(getImageOptions(wImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20, x: -25 }, [\n      new Dna.Components.Image(getImageOptions(aImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20 }, [\n      new Dna.Components.Image(getImageOptions(sImage))\n    ]);\n    new Dna.GameObject(moveControls, { y: 20, x: 25 }, [\n      new Dna.Components.Image(getImageOptions(dImage))\n    ]);\n\n    let shootControls = new Dna.GameObject(controls, { x: -40, y: -30 });\n    new Dna.GameObject(shootControls, { x: -25, y: -10 }, [\n      new Dna.Components.Text({ text: \"Aim\" })\n    ]);\n    new Dna.GameObject(shootControls, { x: -25, y: 10 }, [\n      new Dna.Components.Image(getImageOptions(mouseImage))\n    ]);\n    new Dna.GameObject(shootControls, { x: 25, y: -10 }, [\n      new Dna.Components.Text({ text: \"Shoot\" })\n    ]);\n    new Dna.GameObject(shootControls, { x: 25, y: 10 }, [\n      new Dna.Components.Image(getImageOptions(leftClickImage))\n    ]);\n\n    let gunControls = new Dna.GameObject(controls, { x: 40 });\n    new Dna.GameObject(gunControls, { y: -35 }, [\n      new Dna.Components.Text({ text: \"Reload\" })\n    ]);\n    new Dna.GameObject(gunControls, { y: -15 }, [\n      new Dna.Components.Image(getImageOptions(rImage))\n    ]);\n    new Dna.GameObject(gunControls, { y: 15 }, [\n      new Dna.Components.Text({ text: \"Weapon\" })\n    ]);\n    new Dna.GameObject(gunControls, { y: 35 }, [\n      new Dna.Components.Image(getImageOptions(tabImage))\n    ]);\n    //TODO fix this, dont depend on calling this\n    //foreground.renderAll();\n  }\n);\n\nlet canvas = new Dna.Canvas(document.getElementById(\"canvas\"));\n\nfunction start() {\n  let mouse = new Dna.Input.Mouse(canvas);\n\n  let crosshair = new Crosshair(canvas, mouse);\n\n  let ammoTextContainer = new Dna.GameObject(canvas, { x: 300, y: 200 });\n  let ammoText = new Dna.Components.Text({});\n  new Dna.GameObject(ammoTextContainer, { y: -10 }, [\n    new Dna.Components.Text({ text: \"AMMO\" })\n  ]);\n  new Dna.GameObject(ammoTextContainer, { y: 10 }, [ammoText]);\n\n  let heroHurtbox = [];\n  let enemyHurtboxes = [];\n\n  let hero = new HeroPrefab(\n    canvas,\n    ammoText,\n    mouse,\n    crosshair,\n    enemyHurtboxes,\n    heroHurtbox\n  );\n\n  new Slime(canvas, { x: 200, y: 150 }, hero, heroHurtbox, enemyHurtboxes);\n  new Slime(canvas, { x: 200, y: -150 }, hero, heroHurtbox, enemyHurtboxes);\n  new Slime(canvas, { x: -200, y: 150 }, hero, heroHurtbox, enemyHurtboxes);\n  new Slime(canvas, { x: -200, y: -150 }, hero, heroHurtbox, enemyHurtboxes);\n\n  const X_OFFSET = 350;\n  const Y_OFFSET = 250;\n  const X_LONG = 500;\n  const Y_LONG = 700;\n  const SHORT = 20;\n  let topBoundary = new Boundary(\n    canvas,\n    Alignments.TOP,\n    -Y_OFFSET,\n    Y_LONG,\n    SHORT,\n    heroHurtbox\n  );\n  let bottomBoundary = new Boundary(\n    canvas,\n    Alignments.BOTTOM,\n    Y_OFFSET,\n    Y_LONG,\n    SHORT,\n    heroHurtbox\n  );\n  let leftBoundary = new Boundary(\n    canvas,\n    Alignments.LEFT,\n    -X_OFFSET,\n    SHORT,\n    X_LONG,\n    heroHurtbox\n  );\n  let rightBoundary = new Boundary(\n    canvas,\n    Alignments.RIGHT,\n    X_OFFSET,\n    SHORT,\n    X_LONG,\n    heroHurtbox\n  );\n}\n\n//TODO load hero and slime images this way\nlet scene = new Dna.Scene(\n  [canvas],\n  new Dna.Assets({\n    hero: heroAssets,\n    slime: slimeAssets,\n    guns: gunAssets\n  }),\n  start\n);\nscene.load();\n"]}