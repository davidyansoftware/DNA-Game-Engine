{"version":3,"sources":["Unit.js","Boundary.js","collisions.js"],"names":["SPEED","Unit","keyboard","physics","deltaTime","xv","yv","left","right","up","down","Dna","Component","Boundary","parent","alignment","offset","width","height","hurtboxes","getPosition","Components","Rectangle","hitbox","Hitbox","onCollision","addComponent","GameObject","Alignments","TOP","y","hurtbox","radius","gameObject","transform","console","log","BOTTOM","LEFT","x","RIGHT","RADIUS","canvas","Canvas","document","getElementById","start","gravity","SimplePhysics","xy","circleInput","circleKeyboard","Input","Keyboard","rectInput","rectKeyboard","circle","Polygon","vert","circlePhysics","circleHeroComponent","circleHurtcircle","Hitcircle","rect","rectPhysics","rectHeroComponent","rectHurtbox","circleHitcircle","xOffset","leftLimit","rightLimit","prevX","yOffset","topLimit","bottomLimit","prevY","rectHitbox","SHORT","LONG","OFFSET","topBoundary","bottomBoundary","leftBoundary","rightBoundary","scene","Scene","Assets","load"],"mappings":"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","file":"collisions.d3ab3ebf.map","sourceRoot":"../demos/collisions","sourcesContent":["const SPEED = 5;\n\nclass Unit extends Dna.Component {\n  constructor(keyboard, physics) {\n    super();\n\n    this.keyboard = keyboard;\n    this.physics = physics;\n  }\n\n  update(deltaTime) {\n    let xv = 0;\n    let yv = 0;\n    if (this.keyboard.left) xv -= SPEED;\n    if (this.keyboard.right) xv += SPEED;\n    if (this.keyboard.up) yv -= SPEED;\n    if (this.keyboard.down) yv += SPEED;\n\n    this.physics.xv = xv;\n    this.physics.yv = yv;\n  }\n}\n\n/*\nclass Hero extends Dna.GameObject {\n  constructor(parent, position, input) {\n    super(parent, position, [\n      new Dna.Components.Rectangle({ width: SIZE, height: SIZE })\n    ]);\n\n    this.physics = new Dna.Components.SimplePhysics();\n    this.addComponent(this.physics);\n\n    this.hurtbox = new Dna.Components.Hitbox({\n      width: SIZE,\n      height: SIZE\n    });\n    this.addComponent(this.hurtbox);\n\n    this.addComponent(new HeroComponent(input, this.physics));\n  }\n\n  ground() {\n    this.grounded = true;\n\n    this.gravity.active = false;\n    this.physics.xy = 0;\n\n    console.log(\"on ground\");\n  }\n}\n*/\n\nexport { Unit };\n","//TODO should not use hitboxes for this, doens't account for condition where unit moves past boundary in single frame\nclass Boundary extends Dna.GameObject {\n  constructor(parent, alignment, offset, width, height, hurtboxes) {\n    //}, callback) {\n    super(parent, alignment.getPosition(offset), [\n      new Dna.Components.Rectangle({ width: width, height: height })\n    ]);\n\n    let hitbox = new Dna.Components.Hitbox(\n      {\n        width: width,\n        height: height,\n        hurtboxes: hurtboxes,\n        onCollision: alignment.onCollision\n      }\n      /*\n      width,\n      height,\n      hurtboxes,\n      alignment.callback\n      */\n      /*\n      hurtbox => {\n        //TODO set absolute\n        hurtbox.gameObject.transform.x =\n          this.transform.getAbsoluteCenter().x - WIDTH / 2 - hurtbox.radius;\n        console.log(\"collision detected\");\n      }\n      */\n    );\n    this.addComponent(hitbox);\n  }\n}\n\n//TODO this offset logic is jank\nlet Alignments = {\n  TOP: {\n    getPosition: offset => {\n      return { y: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.height / 2;\n      hurtbox.gameObject.transform.y =\n        this.gameObject.transform.y + this.height / 2 + offset;\n      console.log(\"collision detected\");\n    }\n  },\n  BOTTOM: {\n    getPosition: offset => {\n      return { y: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.height / 2;\n      hurtbox.gameObject.transform.y =\n        this.gameObject.transform.y - this.height / 2 - offset;\n      console.log(\"collision detected\");\n      //hurtbox.gameObject.ground();\n    }\n  },\n  LEFT: {\n    getPosition: offset => {\n      return { x: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.width / 2;\n      hurtbox.gameObject.transform.x =\n        this.gameObject.transform.x + this.width / 2 + offset;\n      console.log(\"collision detected\");\n    }\n  },\n  RIGHT: {\n    getPosition: offset => {\n      return { x: offset };\n    },\n    onCollision: function(hurtbox) {\n      //TODO set absolute\n      let offset = hurtbox.radius || hurtbox.width / 2;\n      hurtbox.gameObject.transform.x =\n        this.gameObject.transform.x - this.width / 2 - offset;\n      console.log(\"collision detected\");\n    }\n  }\n};\n\nexport { Boundary, Alignments };\n","import { Unit } from \"./Unit\";\nimport { Boundary, Alignments } from \"./Boundary\";\n\nconst RADIUS = 20;\n\nlet canvas = new Dna.Canvas(document.getElementById(\"canvas\"));\n\nfunction start() {\n  let gravity = new Dna.Components.SimplePhysics({ xy: 5 });\n\n  //TODO handle mouse input\n  let circleInput = {\n    87: \"up\",\n    83: \"down\",\n    65: \"left\",\n    68: \"right\"\n  };\n  let circleKeyboard = new Dna.Input.Keyboard(circleInput);\n\n  let rectInput = {\n    38: \"up\",\n    40: \"down\",\n    37: \"left\",\n    39: \"right\"\n  };\n  let rectKeyboard = new Dna.Input.Keyboard(rectInput);\n\n  //let hero = new Hero(canvas, {}, circleKeyboard);\n\n  let circle = new Dna.GameObject(canvas, { x: -30 }, [\n    new Dna.Components.Polygon({ vert: 0, radius: RADIUS })\n  ]);\n  let circlePhysics = new Dna.Components.SimplePhysics();\n  let circleHeroComponent = new Unit(circleKeyboard, circlePhysics);\n  let circleHurtcircle = new Dna.Components.Hitcircle({ radius: RADIUS });\n  circle.addComponent(circlePhysics);\n  circle.addComponent(circleHeroComponent);\n  circle.addComponent(circleHurtcircle);\n\n  let rect = new Dna.GameObject(canvas, { x: 30 }, [\n    new Dna.Components.Rectangle({ width: RADIUS * 2, height: RADIUS * 2 })\n  ]);\n  let rectPhysics = new Dna.Components.SimplePhysics();\n  let rectHeroComponent = new Unit(rectKeyboard, rectPhysics);\n  let rectHurtbox = new Dna.Components.Hitbox({\n    width: RADIUS * 2,\n    height: RADIUS * 2\n  });\n  rect.addComponent(rectPhysics);\n  rect.addComponent(rectHeroComponent);\n  rect.addComponent(rectHurtbox);\n\n  let circleHitcircle = new Dna.Components.Hitcircle({\n    radius: RADIUS,\n    hurtboxes: [rectHurtbox],\n    onCollision: function(hurtbox) {\n      //TODO these should be using absolute positions\n      let xOffset = this.radius + hurtbox.width / 2;\n      let leftLimit = hurtbox.gameObject.transform.x - xOffset;\n      let rightLimit = hurtbox.gameObject.transform.x + xOffset;\n      if (\n        this.gameObject.transform.prevX <= leftLimit &&\n        this.gameObject.transform.x > leftLimit\n      ) {\n        this.gameObject.transform.x = leftLimit;\n      }\n      if (\n        this.gameObject.transform.prevX >= rightLimit &&\n        this.gameObject.transform.x < rightLimit\n      ) {\n        this.gameObject.transform.x = rightLimit;\n      }\n\n      let yOffset = this.radius + hurtbox.height / 2;\n      let topLimit = hurtbox.gameObject.transform.y - yOffset;\n      let bottomLimit = hurtbox.gameObject.transform.y + yOffset;\n      if (\n        this.gameObject.transform.prevY <= topLimit &&\n        this.gameObject.transform.y > topLimit\n      ) {\n        this.gameObject.transform.y = topLimit;\n      }\n      if (\n        this.gameObject.transform.prevY >= bottomLimit &&\n        this.gameObject.transform.y < bottomLimit\n      ) {\n        this.gameObject.transform.y = bottomLimit;\n      }\n    }\n  });\n\n  let rectHitbox = new Dna.Components.Hitbox({\n    width: RADIUS * 2,\n    height: RADIUS * 2,\n    hurtboxes: [circleHurtcircle]\n  });\n  rect.addComponent(rectHitbox);\n  circle.addComponent(circleHitcircle);\n\n  //TODO normalize callback by using alignment?? top, bottom, left, right\n  const SHORT = 10;\n  const LONG = 500;\n  const OFFSET = 100;\n\n  let hurtboxes = [circleHurtcircle, rectHurtbox];\n  //let hurtboxes = [hero.hurtbox];\n  let topBoundary = new Boundary(\n    canvas,\n    Alignments.TOP,\n    -OFFSET,\n    LONG,\n    SHORT,\n    hurtboxes\n  );\n  let bottomBoundary = new Boundary(\n    canvas,\n    Alignments.BOTTOM,\n    OFFSET,\n    LONG,\n    SHORT,\n    hurtboxes\n  );\n\n  let leftBoundary = new Boundary(\n    canvas,\n    Alignments.LEFT,\n    -OFFSET,\n    SHORT,\n    LONG,\n    hurtboxes\n  );\n  let rightBoundary = new Boundary(\n    canvas,\n    Alignments.RIGHT,\n    OFFSET,\n    SHORT,\n    LONG,\n    hurtboxes\n  );\n}\n\nlet scene = new Dna.Scene([canvas], new Dna.Assets(), start);\nscene.load();\n"]}